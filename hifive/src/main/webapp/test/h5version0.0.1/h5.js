/* Copyright (C) 2012-2014 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 0.0.1 gitCommitId 587bce5de3d2dcc2e2a7fd62e5c4cdc28074e6eb (util,controller,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage) */
(function(b){function c(b,c,k){var E=null,A=ab[b],w=gb[b];w&&(E=w(b,A,c,k));!E&&A&&(E=e.u.str.format.apply(null,[A].concat(c)));E&&(E+="(code="+b+")");c=E?Error(E):Error("FwError: code = "+b);b&&(c.code=b);k&&(c.detail=k);throw c;}function ga(b,c,k){var E=null,A=ab[b];A&&(c=[A].concat(c),E=e.u.str.format.apply(null,c));return{code:b,message:E,detail:k}}function M(c){return null==c?c:b.isArray(c)?c:[c]}function U(b){var c=document.createElement("span");c.innerHTML='<a href="'+b+'" />';return c.firstChild.href}
function w(b){return"string"===typeof b}function Aa(b){return b.isRejected?b.isRejected():"rejected"===b.state()}function Ba(b){return b.isResolved?b.isResolved():"resolved"===b.state()}function ja(b){return!w(b)?!1:!!b.match(/^[A-Za-z_\$][\w|\$]*$/)}function ka(c){if("regexp"===b.type(c))return c;var e="",e=-1!==c.indexOf("*")?b.map(c.split("*"),function(b){return b.replace(/\W/g,"\\$&")}).join(".*"):c;return RegExp("^"+e+"$")}function la(b,c,e){b&&(b._h5UnwrappedCall?b._h5UnwrappedCall(c,e):b[c](e))}
function R(c,e,k,E){return c[b.hasOwnProperty("curCSS")?"pipe":"then"](e,k,E)}function ca(b){return b.nodeType===hb?b:b.ownerDocument}var bb=void 0;if(window.h5){if(window.h5.env&&"0.0.1"===window.h5.env.version)return;bb=window.h5}var e={};window.h5=e;e.coexist=function(){window.h5=bb;return e};e.env={version:"0.0.1"};var ab={},gb={},hb=9,cb={controllerInternal:null},db;(function(){function q(b){switch(b){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";
case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case y:return"u";case "undefElem":return"_";case "objElem":return"@"}}function x(b,a){if(w(b)){var d=b;a&&(d=d.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return d=d.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,
"\\f").replace(/\t/g,"\\t")}return b instanceof String?new String(x(b.toString())):b}function k(b,a){return"1"===a?b:w(b)?b.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):b instanceof String?new String(k(b.toString())):b}function E(b,a,d){var g=e.async.deferred();e.ajax({url:b,async:a,cache:d,dataType:"script",converters:{"text script":function(b){return b}}}).done(function(){var b=D(arguments);b.push(this.url);
g.notifyWith(g,b);g.resolveWith(g,b)}).fail(function(){g.rejectWith(g,D(arguments))});return g.promise()}function A(b){w(b)||c(u,"h5.u.obj.ns()");for(var b=b.split("."),a=b.length,d=0;d<a;d++)ja(b[d])||c(u,"h5.u.obj.ns()");for(var g=window,d=0;d<a;d++){var H=b[d];void 0===g[H]&&(g[H]={});g=g[H]}return g}function I(b,a){var d=A(b),g;for(g in a)a.hasOwnProperty(g)&&(void 0!==d[g]&&c(s,[b,g]),d[g]=a[g])}function C(a){return!a||!a.jquery?!1:a.jquery===b().jquery}function D(b){return Array.prototype.slice.call(b)}
var y="undefined",u=11E3,s=11001,J=11004,i=11005,t=11006,p={},d={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&apos;"},a=void 0!==document.createElement("script").onload,f=-1===/\r\n/.toString().indexOf("\r\n");I("h5.u",{loadScript:function(d,f){var u=e.async.deferred,g=M(d);(!g||0===g.length)&&c(11007);for(var H=0,O=g.length;H<O;H++)d=g[H],(!w(d)||!b.trim(d))&&c(11007);null!=f&&!b.isPlainObject(f)&&c(11008,"h5.u.loadScript()");var r=f&&!1===f.async?!1:!0,o=!!(f&&!0===f.force),H=!!(f&&!0===
f.parallel),i=!!(f&&!0===f.atomic),q=!o,t=r?u():null,k=r?function(b){t.reject(ga(11010,[b]))}:null,O=r?function(){var b=u();setTimeout(function(){b.resolve([])},0);return b.promise()}:null,s=H?[]:null,y=[],x={};if(r){if(!i&&a){var J=b("head"),A=function(b){var g=u(),j=document.createElement("script");j.onload=function(){j.onload=null;p[b]=b;g.resolve()};j.onerror=function(){j.onerror=null;g.reject(b)};j.type="text/javascript";j.src=q?b:b+(-1<b.indexOf("?")?"&_":"?_")+ +new Date;J[0].appendChild(j);
return g.promise()};if(H)s.push(O()),b.each(g,function(){var b=U(this);if(!o&&b in p)return!0;s.push(A(b))}),e.async.when(s).done(function(){t.resolve()}).fail(k);else{var C=R(u().resolve(),O);b.each(g,function(){var b=U(this);C=R(C,function(){if(o||!(b in p))return A(b)},k)});R(C,function(){t.resolve()},k)}}else if(H){var I=[];s.push(O());I.push(null);b.each(g,function(){var b=U(this);if(!o&&(b in p||b in x))return!0;s.push(E(b,r,q));i?x[b]=b:I.push(null)});H=g=null;i?(g=function(){b.each(D(arguments),
function(h,g){b.globalEval(g[0])});b.extend(p,x);t.resolve()},H=b.noop):(g=function(){t.resolve()},H=function(){for(var h=D(arguments),g=0;g<I.length;g++)if(h[g]){var j=h[g][3];I[g]!==j&&(b.globalEval(h[g][0]),I.splice(g,1,j))}});e.async.when(s).done(g).fail(k).progress(H)}else C=R(u().resolve(),O),b.each(g,function(){var h=U(this);C=R(C,function(){var g=u();!o&&(h in p||h in x)?g.resolve():E(h,r,q).done(function(j){i?(y.push(j),x[h]=h):(b.globalEval(j),p[h]=h);g.resolve()}).fail(function(){g.reject(this.url)});
return g.promise()},k)}),R(C,function(){i&&(b.each(y,function(h,g){b.globalEval(g)}),b.extend(p,x));t.resolve()},k);return t.promise()}b.each(g,function(){var h=U(this);if(!o&&(h in p||h in x))return!0;E(h,r,q).done(function(g){i?(y.push(g),x[h]=h):(b.globalEval(g),p[h]=h)}).fail(function(){c(11010,[h])})});i&&(b.each(y,function(h,g){b.globalEval(g)}),b.extend(p,x))},createInterceptor:function(a,d){return function(c){var g={},f=a?a.call(this,c,g):c.proceed();c.result=f;if(!d)return f;if(f&&b.isFunction(f.promise)&&
!C(f)){var u=this;la(f,"always",function(){d.call(u,c,g)});return f}d.call(this,c,g);return f}}});I("h5.u.str",{startsWith:function(b,a){return 0===b.lastIndexOf(a,0)},endsWith:function(b,a){var d=b.length-a.length;return 0<=d&&b.lastIndexOf(a)===d},format:function(b,a){if(null==b)return"";var d=arguments;return b.replace(/\{(\d+)\}/g,function(b,a){var c=d[parseInt(a,10)+1];return typeof c===y?y:c})},escapeHtml:function(a){return"string"!==b.type(a)?a:a.replace(/[&"'<>]/g,function(b){return d[b]})}});
I("h5.u.obj",{expose:I,ns:A,serialize:function(a){function d(b){for(var g=0,a=H.length;g<a;g++)if(b===H[g])return!0;return!1}function u(b){for(var g=0,a=H.length;g<a;g++)b===H[g]&&H.splice(g,1)}function g(a){var r=a,o=b.type(a);"object"===typeof a&&(a instanceof String?o="String":a instanceof Number?o="Number":a instanceof Boolean&&(o="Boolean"));switch(o){case "String":case "string":r=q(o)+x(r);break;case "Boolean":r=r.valueOf();case "boolean":r=q(o)+(r?1:0);break;case "Number":r=r.valueOf();if(b.isNaN&&
b.isNaN(a)||b.isNumeric&&!b.isNumeric(a))r=Infinity===a.valueOf()?q("infinity"):-Infinity===a.valueOf()?q("-infinity"):q("nan");r=q(o)+r;break;case "number":r=b.isNaN&&b.isNaN(a)||b.isNumeric&&!b.isNumeric(a)?Infinity===a?q("infinity"):-Infinity===a?q("-infinity"):q("nan"):q(o)+r;break;case "regexp":r=q(o)+x(r.toString(),f);break;case "date":r=q(o)+ +r;break;case "array":d(a)&&c(ERR_CODE_REFERENCE_CYCLE);H.push(a);for(var n=[],r=q(o)+"[",o=0,e=a.length;o<e;o++){n[o.toString()]=!0;var t;t=a.hasOwnProperty(o)?
"function"===b.type(a[o])?q(y):g(a[o]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):q("undefElem");r+='"'+t+'"';o!==a.length-1&&(r+=",")}var o="",p;for(p in a)n[p]||"function"!==b.type(a[p])&&(o+='"'+x(p)+'":"'+g(a[p]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');o&&(r+=(a.length?",":"")+'"'+q("objElem")+"{"+o.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),r=r.replace(/,$/,""),r+='}"');r+="]";u(a);break;case "object":d(a)&&c(i);H.push(a);r=q(o)+"{";for(p in a)a.hasOwnProperty(p)&&"function"!==b.type(a[p])&&
(r+='"'+p+'":"'+g(a[p]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');r=r.replace(/,$/,"");r+="}";u(a);break;case "null":case y:r=q(o)}return r}b.isFunction(a)&&c(11002);var H=[];return"2|"+g(a)},deserialize:function(a){function d(a){function u(b){switch(b){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";
case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return y;case "_":return"undefElem";case "@":return"objElem"}}a.match(/^(.)(.*)/);a=RegExp.$1;g=RegExp.$2?RegExp.$2:"";if(void 0!==a&&""!==a)switch(u(a)){case "String":g=new String(k(g,f));break;case "string":break;case "Boolean":"0"===g||"1"===g?g=new Boolean("1"===g):c(t);break;case "boolean":"0"===g||"1"===g?g="1"===g:c(t);break;case "nan":""!==g&&c(t);g=NaN;break;case "infinity":""!==g&&c(t);
g=Infinity;break;case "-infinity":""!==g&&c(t);g=-Infinity;break;case "Number":"infinity"===u(g)?g=new Number(Infinity):"-infinity"===u(g)?g=new Number(-Infinity):"nan"===u(g)?g=new Number(NaN):(g=new Number(g),isNaN(g.valueOf())&&c(t));break;case "number":g=(new Number(g)).valueOf();isNaN(g)&&c(t);break;case "array":var r;try{r=b.parseJSON(g)}catch(i){c(t)}b.isArray(r)||c(t);for(var n=0;n<r.length;n++)switch(u(r[n].substring(0,1))){case "undefElem":delete r[n];break;case "objElem":for(var e=d(q("object")+
r[n].substring(1)),a=[],n=0,p=r.length-1;n<p;n++)a[n]=r[n];r=a;for(var s in e)r[s]=e[s];break;default:r[n]=d(r[n])}g=r;break;case "object":try{r=b.parseJSON(g)}catch(x){c(t)}b.isPlainObject(r)||c(t);for(s in r)r[s]=d(r[s]);g=r;break;case "date":g=new Date(parseInt(g,10));break;case "regexp":try{n=g.match(/^\/(.*)\/(.*)$/),e=k(n[1],f),g=RegExp(e,n[2])}catch(E){c(t)}break;case "null":""!==g&&c(t);g=null;break;case y:""!==g&&c(t);g=void 0;break;default:c(J)}return k(g,f)}w(a)||c(11009);a.match(/^(.)\|(.*)/);
var f=RegExp.$1;"1"!==f&&"2"!==f&&c(11003,[f,"2"]);var g=RegExp.$2;return d(g)},isJQueryObject:C,argsToArray:D,getByPath:function(b,a){w(b)||c(u,"h5.u.obj.getByPath()");var d=b.split(".");!a&&"window"===d[0]&&d.unshift();for(var g=a||window,f=0,i=d.length;f<i&&!(g=g[d[f]],null==g);f++);return g}})})();(function(){var q,x,k,E,A,I,C;function D(b){return b.match(/^error$/i)?q:b.match(/^warn$/i)?x:b.match(/^info$/i)?k:b.match(/^debug$/i)?E:b.match(/^trace$/i)?A:b.match(/^all$/i)?I:b.match(/^none$/i)?
C:null}function y(a,d){var f={};if(b.isArray(a)){var c=a.slice(0,3).join(" <- ");0<a.slice(3).length&&(c+=" ...");f.recent=c;f.all=d.join("\n")}else f.recent=a,f.all=d;return f}function u(b){var a="";b.name?a=b.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(b.toString()),a=RegExp.$1);return a}function s(a){for(var a=e.u.obj.argsToArray(a),d=[],f=0,c=a.length;f<c;f++)d.push(b.type(a[f]));return d.join(", ")}function J(){}function i(g){(!w(g)||0===b.trim(g).length)&&c(a);this.category=b.trim(g)}var t=
10002,p=10003,d=10004,a=10005,f=10007,n=10008,B=10010;q=50;x=40;k=30;E=20;A=10;I=0;C=-1;var G=null;J.prototype={init:function(){},log:function(b){window.console&&(w(b.args[0])?this._logMsg(b):this._logObj(b))},_logMsg:function(b){var a=b.args,d=null,d=1===a.length?a[0]:e.u.str.format.apply(e.u.str,a),a=this._getLogPrefix(b)+d;b.logger.enableStackTrace&&(a+="  ["+b.stackTrace.recent+"]");b.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(a):this._consoleOut(b.level,a);b.logger.enableStackTrace&&
this._consoleOut(b.level,b.stackTrace.all);b.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(b,a){var d=!1;b==q&&console.error?(console.error(a),d=!0):b==x&&console.warn?(console.warn(a),d=!0):b==k&&console.info?(console.info(a),d=!0):b==E&&console.debug&&(console.debug(a),d=!0);!d&&console.log&&console.log(a)},_getLogPrefix:function(b){return"["+b.levelString+"]"+b.date.getHours()+":"+b.date.getMinutes()+":"+b.date.getSeconds()+","+b.date.getMilliseconds()+": "},
_logObj:function(b){var a=b.args,d=this._getLogPrefix(b);a.unshift(d);b.level==q&&console.error?this._output(console.error,a):b.level==x&&console.warn?this._output(console.warn,a):b.level==k&&console.info?this._output(console.info,a):b.level==E&&console.debug?this._output(console.debug,a):this._output(console.log,a)},_output:function(b,a){try{if(b.apply){b.apply(console,a);return}}catch(d){}b(a)}};i.prototype={enableStackTrace:!1,maxStackSize:10,error:function(b){this._log(q,arguments,this.error)},
warn:function(b){this._log(x,arguments,this.warn)},info:function(b){this._log(k,arguments,this.info)},debug:function(b){this._log(E,arguments,this.debug)},trace:function(b){this._log(A,arguments,this.trace)},_traceFunctionName:function(a){var d=Error(),f=d.stack||d.stacktrace,d=[],c={};if(f)var d=f.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),i=null,d=b.map(d,function(a){return i=0===a.length?
null:""===b.trim(a)?"{anonymous}":b.trim(a)}),c=y(d.slice(3,d.length),d.slice(0,this.maxStackSize));else{f=null;try{f=a.caller}catch(n){}a=0;if(f)for(;;){var e=s(f.arguments),p=u(f),q=null;try{q=f.caller}catch(t){d.push("{unable to trace}");c=y(d,d);break}p?d.push("{"+p+"}("+e+")"):q?d.push("{anonymous}("+e+")"):d.push("{root}("+e+")");if(!q||a>=this.maxStackSize){c=y(d,d);break}f=q;a++}else c=y("{unable to trace}","{unable to trace}")}return c},_log:function(b,a,d){var a={level:b,args:e.u.obj.argsToArray(a),
stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},f=G.out,c=G.defaultOut,d=null;if(f)for(var f=M(f),u=0,i=f.length;u<i;u++){var n=f[u];if(n.compiledCategory.test(this.category)){d=n;break}}d||(d=c);u=d.compiledLevel;d=d.compiledTargets;if(!(b<u||0>u))if(a.logger=this,a.date=new Date,a.levelString=this._levelToString(b),d&&0!==d.length){u=0;for(i=d.length;u<i;u++)d[u].log(a)}},_levelToString:function(b){if(b===q)return"ERROR";if(b===x)return"WARN";if(b===k)return"INFO";if(b===E)return"DEBUG";
if(b===A)return"TRACE"}};e.u.obj.expose("h5.log",{createLogger:function(b){return new i(b)},configure:function(){function a(g,o,r){var q=null==r;if(!q){var e=o.category;(!w(e)||0===b.trim(e).length)&&c(B);e=b.trim(e);-1!==b.inArray(e,i)&&c(t,o.category);o.compiledCategory=ka(e);i.push(e)}e=null==o.level?D(q?u.level:r.level):w(o.level)?D(b.trim(o.level)):o.level;"number"!==typeof e&&c(p,o.level);o.compiledLevel=e;var e=[],k=o.targets;if(!q||null!=k){var s=[];null==k||b.isArray(k)||w(k)&&b.trim(k).length||
c(n);for(var k=M(k),h=0,v=k.length;h<v;h++){null==k[h]||w(k[h])&&b.trim(k[h]).length||c(n);var j=k[h];if(j){-1!==b.inArray(j,s)&&c(f,j);var m=g[j];m||c(d,j);s.push(j);e.push(m.compiledTarget)}}if(!q&&(g=r.targets,null!=g)){g=M(g);h=0;for(v=g.length;h<v;h++)j=g[h],-1===b.inArray(j,s)&&(e.push(r.compiledTargets[h]),s.push(j))}}o.compiledTargets=e}var u={level:"NONE",targets:null},i=[],r=b.extend(!0,{},e.settings.log?e.settings.log:{defaultOut:u}),o=r.target;o||(o={},r.target=o);(function(a){b.isPlainObject(a)||
c(10009);for(var d in a){var f=a[d];b.type(f.type)!=="object"&&f.type!=="console"&&c(1E4);var g=null,g=f.type==="console"?new J:b.extend(true,{},f.type);g.init&&g.init(f);f.compiledTarget=g}a.console={type:"console",compiledTarget:new J}})(o);var q=r.defaultOut;q||(q=u,r.defaultOut=q);a(o,q);var k=r.out;if(k)for(var k=M(k),s=0,y=k.length;s<y;s++)a(o,k[s],q);G=r}})})();(function(){function c(q){e.settings.aspects=b.map(M(q),function(b){b.target&&(b.compiledTarget=ka(b.target));b.pointCut&&(b.compiledPointCut=
ka(b.pointCut));return b})}e.u.obj.ns("h5.settings");e.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(b){b=b.status;if("POST"===this.type||!(0===b||12029===b))return!1}}};var x=e.u.createInterceptor(function(b,c){this.log.info("{0}.{1}が開始されました。",this.__name,b.funcName);this.log.info(b.args);c.start=new Date;return b.proceed()},function(b,c){var e=(new Date).getTime()-
c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,b.funcName,e)});e.u.obj.expose("h5.core.interceptor",{lapInterceptor:x,logInterceptor:x,errorInterceptor:function(c){var q=null;try{q=c.proceed()}catch(x){e.settings.commonFailHandler&&b.isFunction(e.settings.commonFailHandler)&&e.settings.commonFailHandler.call(null,x)}return q}});b(document).trigger("h5preinit");e.settings.aspects&&c(e.settings.aspects);e.log.configure()})();(function(){e.u.obj.expose("h5.env",{ua:function(c){function e(b,
a){var d=H(b,"[^;)]*",a).split(" ");return 1===d.length?"":d[d.length-1]}function k(b,a){var d=H(b,"[^;) ]*",a).split("/");return 1===d.length?"":d[d.length-1]}function E(b,a){var d=H(b,"[^;) ]*",a).split(":");return 1===d.length?"":d[d.length-1]}var A=!!c.match(/iPhone/i),w=!!c.match(/iPad/i),C=A||w,D=!!c.match(/android/i),y=!!c.match(/Windows Phone/i),u=!!c.match(/MSIE/)||!!c.match(/Trident/),s=!!c.match(/Firefox/i),J=!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),i=!D&&!!c.match(/Safari/i)&&
!J,t=!!c.match(/Webkit/i),p=!!c.match(/Opera/i),d=D&&!!c.match(/Safari/i)&&!J,a=!(!A&&!y&&!(d&&c.match(/Mobile/)&&!c.match(/SC-01C/)||D&&J&&c.match(/Mobile/)||c.match(/Fennec/i)||c.match(/Opera Mobi/i))),f=!(!w&&!(d&&!c.match(/Mobile/)||D&&J&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),n=!a&&!f,B=null,G=null,g=function(a,d){return b.trim(c.substring(c.indexOf(a)+a.length,c.indexOf(d))).split("_")},H=function(a,d,f){return b.trim(c.match(!1===f?RegExp(a+d):
RegExp(a+d,"i")))};if(A)G=g("iPhone OS","like"),B=parseInt(G[0]),G=G.join(".");else if(w)G=g("CPU OS","like"),B=parseInt(G[0]),G=G.join(".");else if(!D||!s)D?(G=e("Android"),B=parseInt(G.split(".")[0])):y&&((G=e("Windows Phone OS"))||(G=e("Windows Phone")),B=parseInt(G.split(".")[0]));u&&p&&(u=!1);var O=g=null;if(C||D&&d)g=B,O=G;else{var r=null;u?r=e("MSIE",!1)||E("rv"):J?(r=k("Chrome",!1))||(r=k("CrMo",!1)):i?r=k("Version"):s?r=k("Firefox"):p&&((r=k("Version"))||(r=k("Opera")),r||(r=e("Opera")));
r&&(g=parseInt(r.split(".")[0]),O=r)}return{osVersion:B,osVersionFull:G,browserVersion:g,browserVersionFull:O,isiPhone:A,isiPad:w,isiOS:C,isAndroid:D,isWindowsPhone:y,isIE:u,isFirefox:s,isChrome:J,isSafari:i,isOpera:p,isAndroidDefaultBrowser:d,isSmartPhone:a,isTablet:f,isDesktop:n,isWebkit:t}}(navigator.userAgent)})})();(function(){function q(c){function e(){q=!0;i=this;t=C(arguments);if(Aa(c)||Ba(c))return c;var d=C(arguments);if(0<p.length)for(var a=0,f=p.length;a<f;a++){var n=d;n!==arguments&&
(n=M(n));b.isFunction(p[a])&&p[a].apply(this,n)}return c}var q=!1,i=null,t=null,p=[];c.progress=function(){for(var d=C(arguments),a=0,f=d.length;a<f;a++){var e=d[a];if(b.isArray(e))c.progress.apply(this,e);else if(b.isFunction(e))if(q){var k=t;k!==t&&(k=M(k));e.apply(i,k)}else p.push(e)}return this};c.notify=e;c.notifyWith=function(b,a){return!a?e.apply(b):e.apply(b,a)}}function x(c){if(!c)return!1;for(var c=M(c),e=0,q=c.length;e<q;e++)if(b.isFunction(c[e]))return!0;return!1}function k(c,s){function D(b){s?
s[b]&&(c[b]=s[b]):(n[b]=c[b],c[b]=function(){return function(){if(!a){var d=C(arguments);if("then"===b||"pipe"===b)d=d[1];x(d)&&(a=!0)}return c._h5UnwrappedCall.call(this,b,C(arguments))}}(b),B[b]=c[b])}function i(b){return function(){var d=e.settings.commonFailHandler;!a&&d&&!f&&(c.fail.call(this,d),f=!0);return b.apply(this,arguments)}}if(c._h5UnwrappedCall)return c;var t=!!c.progress,p=b.Deferred(),d=p!==p.then();!t&&!y(c)?q(c):s&&(c.progress=s.progress);var a=!1,f=!1,n={},B={};c._h5UnwrappedCall=
s?s._h5UnwrappedCall:function(a,d){d=M(d);b.extend(c,n);var f=c[a].apply(this,d);b.extend(c,B);return f};for(var p=0,G=w.length;p<G;p++){var g=w[p];c[g]&&D(g)}c.pipe&&!s&&(c.pipe=function(){for(var a=e.async.deferred(),d=C(arguments),c=0,f=A.length;c<f;c++){var g=this;(function(d,c,f){if(b.isFunction(d))g[c](function(){var c=d.apply(this,arguments);if(c&&b.isFunction(c.promise)){k(c);c.done(a.resolve);c._h5UnwrappedCall("fail",a.reject);b.isFunction(c.progress)&&c.progress(a.notify)}else a[f+"With"](this,
[c])})})(d[c],A[c],I[c])}return a.promise()},B.pipe=c.pipe);if(c.then&&!s){var H=c.then;c.then=function(){if(d)return B.pipe.apply(this,arguments);var b=arguments,a=H.apply(this,b);!t&&x(b[2])&&c.progress.call(c,b[2]);return a};B.then=c.then}c.reject&&(c.reject=s&&s.reject?s.reject:i(c.reject));c.rejectWith&&(c.rejectWith=s&&s.rejectWith?s.rejectWith:i(c.rejectWith));if(c.promise)if(s&&s.promise)c.promise=s.promise;else{var O=c.promise;c.promise=function(){return k(O.apply(this,arguments),c)}}return c}
var w=["fail","always","pipe","then"],A=["done","fail","progress"],I=["resolve","reject","notify"],C=e.u.obj.argsToArray,D=function(){var c=b.Deferred();return k(c)},y=function(b){return!!b&&b.done&&b.fail&&!b.resolve&&!b.reject};e.u.obj.expose("h5.async",{deferred:D,when:function(){var c=C(arguments);1===c.length&&b.isArray(c[0])&&(c=c[0]);var q=c.length,k=e.async.deferred(),i=k.promise(),t=b.when.apply(b,c).done(function(){k.resolveWith(this&&this.promise&&this.promise()===t?k:this,C(arguments))}).fail(function(){k.rejectWith(this,
C(arguments))});if(t.progress)t.progress(function(){k.notifyWith(this===t?i:this,C(arguments))});else{for(var p=[],d=0;d<q;d++)p[d]=void 0;for(var a=function(b){return function(a){p[b]=1<arguments.length?C(arguments):a;k.notifyWith(i,p)}},d=0;d<q;d++){var f=c[d];f&&b.isFunction(f.promise)&&f.progress&&(1<q?f.progress(a(d)):f.progress(function(){k.notifyWith(i,C(arguments))}))}}return i},isPromise:y,loop:function(e,q,k){b.isArray(e)||c(5E3);var i=D(),t="number"===b.type(k)?k:20,p=!1,d=0,a=e.length,
f,n=null,B=function(){if(d===a)i.resolve(e);else if(p)i.reject(e);else{var b=q.call(e,d,e[d],n);d++;y(b)?b.done(function(){f()}).fail(function(){p=!0;f()}):f()}},G=function(){setTimeout(function(){var b=d-1;0<d&&i.notify({data:e,index:b,value:e[b]});B()},0)},g=!1;f=function(){g||(0===d%t?G():B())};var x=!1,n={resume:function(){!x&&g&&(g=!1,f())},pause:function(){g=!0},stop:function(){x=!0;i.resolve(e)}};G();return i.promise()}})})();(function(){function c(b,e){for(var k=0,q=A.length;k<q;k++){var s=
A[k];b[s]&&(e[I[s]](b[s]),b[s]=void 0)}}function x(c,e,k){for(var q in e)if(e.hasOwnProperty(q)&&(k||!b.isFunction(e[q]))&&-1===b.inArray(q,E))c[q]=e[q]}function k(b,c){x(this,b,!0);c.promise(this);var e=this.always;this.always=function(){e.apply(this,arguments);return this}}var E=["error","success","complete"],A=["error","success","complete"],I={success:"done",error:"fail",complete:"always"};e.u.obj.expose("h5",{ajax:function(){function E(b,c,e){x(J,e);s.resolveWith(this,arguments)}function A(c,
e,k){if(0===y.retryCount||!1===y.retryFilter.apply(this,arguments))x(J,c),s.rejectWith(this,arguments);else if(y.retryCount--,this.async){var d=this;setTimeout(function(){b.ajax(d).done(E).fail(A)},y.retryInterval)}else b.ajax(this).done(E).fail(A)}var y={},u=arguments;w(u[0])?(b.extend(y,u[1]),y.url=u[0]):b.extend(y,u[0]);var y=b.extend({},e.settings.ajax,y),s=e.async.deferred();c(y,s);var u=b.ajax(y),J=new k(u,s);u.done(E).fail(A);return J}})})();(function(){function q(b,a,l,h,c){this.controller=
b;this.event=a;this.evArg=l;this.selector=h;this.selectorType=c}function x(b){return!this.__controllerContext||!this.__controllerContext.executeListeners?void 0:b.proceed()}function k(b,a,l){var h=E(b.__name,a);l&&h.push(x);return A(b[a],a,h)}function E(a,l){var h=[],c=e.settings.aspects;if(!c||0===c.length)return h;for(var c=M(c),d=c.length-1;-1<d;d--){var j=c[d];if(!j.target||j.compiledTarget.test(a)){var f=j.interceptors;if(!j.pointCut||j.compiledPointCut.test(l))if(b.isArray(f))for(j=f.length-
1;-1<j;j--)h=h.concat(f[j]);else h.push(f)}}return h}function A(b,a,l){for(var h=function(b,a,l){return function(){var N=this;return l.call(N,{target:N,func:b,funcName:a,args:arguments,proceed:function(){return b.apply(N,this.args)}})}},c=0,d=l.length;c<d;c++)b=h(b,a,l[c]);return b}function I(b){return!!b.match(/^\{.*\}$/)}function C(b){return!!b.match(/^\[.*\]$/)}function D(a){return b.trim(a.substring(1,a.length-1))}function y(a){return b.trim(a.substring(1,a.length-1))}function u(b,a){for(var l=
["window","document","navigator"],h=0,c=l.length;h<c;h++){var d=l[h];if(b===d||ta(b,d+"."))return e.u.obj.getByPath(b,a.defaultView||a.parentWindow)}return b}function s(a){var h=function(a,N){for(var c in a)if(0<=b.inArray(a,N)||l(c,Ra)&&h(a[c],N.concat([a])))return!0;return!1};return h(a,[])}function J(a){var h=function(a,N){for(var c in a)if(0<=b.inArray(a,N)||l(c,Sa)&&h(a[c],N.concat([a])))return!0;return!1};return h(a,[])}function i(b,a){var h=b[a];return l(a,Ra)&&"rootController"!==a&&"parentController"!==
a&&h&&h.__controllerContext&&!h.__controllerContext.isRoot&&(!h.parentController||h.parentController===b)}function t(a,l,h){var c=[],d=[],j=function(a){d.push(a);for(var N in a)if(i(a,N)){var f=a[N],m=h?f.__controllerContext[l]:f[l];m&&c.push(m);-1===b.inArray(f,d)&&j(f)}};j(a);return c}function p(b){var a=function(b){var l=b.__meta,h={};if(l)for(var N in l)!1===l[N].useHandlers&&(h[N]=1);for(N in b)l=b[N],i(b,N)&&(a(l),h[N]||d(l))};a(b)}function d(a){var l=a.__controllerContext.bindMap,h;for(h in l)for(var c in l[h]){var d=
a,j=h,m=c,g=d.__controllerContext.bindMap[j][m],v=m,F=C(m);F&&(v=y(m));var e=null;switch(v){case "mousewheel":e=sa(d,j,v,g);break;case na:case Ga:case ua:e=Z(d,j,m,g);break;default:e=V(d,j,v,g)}if(b.isArray(e)){d=0;for(j=e.length;d<j;d++)f(e[d],F)}else f(e,F)}}function a(a){var l=a.controller.rootElement,h=a.selector,c=a.eventName,d=a.handler,j=C(c),c=j?y(c):c,f=ca(l);if(I(h)){var m=D(h),h=!1;m===Ha?h=!0:l=u(m,f);h||j||!w(l)?(a.evSelectorType=P.SELECTOR_TYPE_OBJECT,b(l).bind(c,d)):(a.evSelectorType=
P.SELECTOR_TYPE_GLOBAL,b(f).delegate(l,c,d));a.evSelector=l}else a.evSelectorType=P.SELECTOR_TYPE_LOCAL,a.evSelector=h,j?b(h,l).bind(c,d):b(l).delegate(h,c,d)}function f(l,h){h&&(l.eventName="["+l.eventName+"]");var c=l.handler;l.handler=function(){var a=e.settings.listenerElementType===1?b(arguments[0].currentTarget):arguments[0].currentTarget;c.call(l.controller,da(l,arguments),a)};ra(l.controller,l.selector,l.eventName,l.handler);a(l)}function n(b){var a=function(b){var l=b.__meta,h={};if(l)for(var c in l)!1===
l[c].useHandlers&&(h[c]=1);for(c in b)l=b[c],i(b,c)&&(a(l),h[c]||B(l))};a(b)}function B(a){var l=a.rootElement;if(l){var h=ca(l),a=a.__controllerContext.unbindMap,c;for(c in a)for(var d in a[c]){var j=a[c][d],f=C(d),m=f?y(d):d;if(I(c)){var g=D(c),v=!1;if(g===Ha)g=l,v=!0;else{if(null==(h.defaultView||h.parentWindow))continue;g=u(g,h)}v||f||!w(g)?b(g).unbind(m,j):b(h).undelegate(g,m,j)}else f?b(c,l).unbind(m,j):b(l).undelegate(c,m,j)}}}function G(a,l){a.__controllerContext.executeListeners=l;var h=
[],c=function(a){h.push(a);for(var d in a)if(i(a,d)){var N=a[d];N.__controllerContext.executeListeners=l;-1===b.inArray(N,h)&&c(N)}};c(a)}function g(a){var l=[],h=function(a,c,d){a.rootController=c;a.parentController=d;l.push(a);for(var N in a)i(a,N)&&(d=a[N],-1===b.inArray(d,l)&&h(d,c,a))};h(a,a,null)}function H(a,l){var h=l?"__init":"__ready",c=W();setTimeout(function(){c.resolve()},0);var d=c.promise(),j=function(c){var f=!0,m;for(m in c)i(c,m)&&(f=!1,j(c[m]));var g=function(){var d=null,j=c.__name;
if(c[h])try{d=c[h]({args:c.__controllerContext.args})}catch(f){throw a.rootController&&a.rootController.dispose(arguments),f;}var m=l?r(c):o(c);d&&b.isFunction(d.done)&&b.isFunction(d.fail)?d.done(function(){m()}).fail(function(){var b=ga(Ta,j,X(arguments));a.rootController&&a.rootController.dispose(b)}):m()};m=l?O(c):t(c,"readyPromise");l&&f&&m.push(d);e.async.when(m).done(function(){g()}).fail(va)};j(a)}function O(b){var a=t(b,"initPromise");a.push(b.preinitPromise);return a}function r(b){return function(){if(!Y(b)){b.isInit=
!0;var a=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preinitDfd;delete b.__controllerContext.initDfd;a.resolveWith(b);b.__controllerContext&&b.__controllerContext.isRoot&&h(b)}}}function o(a){return function(){if(!Y(a)){a.isReady=!0;var l=a.__controllerContext.readyDfd;delete a.__controllerContext.readyDfd;l.resolveWith(a);a.__controllerContext&&a.__controllerContext.isRoot&&a.rootElement&&a.isInit&&a.isReady&&b(a.rootElement).trigger("h5controllerready",
a)}}}function Q(a,l,h){if(!w(a))return b(a);var d=b.trim(a);I(d)?(a=D(d),h&&(ta(a,"window")||ta(a,"navigator"))&&c(wa),l=b(u(a,ca(l.ownerDocument)))):l=b(l).find(a);return l}function ra(b,a,l,h){b.__controllerContext.unbindMap[a]||(b.__controllerContext.unbindMap[a]={});b.__controllerContext.unbindMap[a][l]=h}function V(b,a,l,h){return{controller:b,selector:a,eventName:l,handler:h}}function sa(b,a,l,h){return{controller:b,selector:a,eventName:typeof document.onmousewheel===ja?"DOMMouseScroll":l,handler:function(a){var l=
a.event;null==l.wheelDelta&&l.originalEvent&&null!=l.originalEvent.wheelDelta&&(l.wheelDelta=l.originalEvent.wheelDelta);null==l.wheelDelta&&l.originalEvent&&null!=l.originalEvent.detail&&(l.wheelDelta=40*-l.originalEvent.detail);h.call(b,a)}}}function Z(a,l,h,c){var d=typeof document.ontouchstart!==ja;if(h!==na)return d?V(a,l,h,c):V(a,l,h,function(a){var l=a.event,h=b(l.currentTarget).offset()||{left:0,top:0};l.offsetX=l.pageX-h.left;l.offsetY=l.pageY-h.top;c.apply(this,arguments)});var j=function(b,
a){for(var l in b)b.hasOwnProperty(l)&&!a[l]&&"target"!==l&&"currentTarget"!==l&&"originalEvent"!==l&&"liveFired"!==l&&(a[l]=b[l]);a.h5DelegatingEvent=b},f=d?"touchstart":"mousedown",m=d?"touchmove":"mousemove",g=d?"touchend":"mouseup",v=b(ca(a.rootElement));return function(){var e=null,F=!1,X=function(l,h,c){return function(f){var aa;a:{switch(l){case "touchstart":case "mousedown":aa=na;break a;case "touchmove":case "mousemove":aa=Ga;break a;case "touchend":case "mouseup":aa=ua;break a}aa=void 0}var Fa=
aa===na;if(!Fa||!F){d&&ma(f.event,l);var P=new b.Event(aa);j(f.event,P);var i=f.event.target;h&&(i=h);c&&c(P);var L=f.event.originalEvent||f.event;Fa&&-1===b.inArray(L,ba)&&(ba=[],ha=[]);var n=b.inArray(L,ba);-1===n&&(n=ba.push(L)-1,ha[n]=!1);if(!ha[n]&&(!d||F||Fa))ha[n]=!0,b(i).trigger(P,f.evArg),F=!0;if(f.event.currentTarget===document&&(aa===ua&&(ba=[],ha=[]),-1!==b.inArray(L,ba)))ba.splice(n,1),ha.splice(n,1);if(Fa&&F){P.h5DelegatingEvent.preventDefault();aa=P.target;var eb=P.clientX,k=P.clientY,
fa=X(m,aa,function(b){var a=b.clientX,l=b.clientY;b.dx=a-eb;b.dy=l-k;eb=a;k=l}),q=X(g,aa),z=function(b){f.event=b;f.evArg=S(arguments);fa(f)},o=function(b){f.event=b;f.evArg=S(arguments);q(f)},p=d?b(aa):v;e=function(){ba=[];ha=[];p.unbind(m,z);p.unbind(g,o);if(!d&&a.rootElement!==document){b(a.rootElement).unbind(m,z);b(a.rootElement).unbind(g,o)}};p.bind(m,z);p.bind(g,o);!d&&a.rootElement!==document&&(b(a.rootElement).bind(m,z),b(a.rootElement).bind(g,o))}else aa===ua&&(e(),F=!1)}}},P=[V(a,l,h,c)];
P.push({controller:a,selector:l,eventName:f,handler:X(f)});return P}()}function ma(a,l){var h=a.originalEvent;if(h){var c="touchend"===l||"touchcancel"===l?h.changedTouches[0]:h.touches[0],d=c.pageX,j=c.pageY;a.pageX=h.pageX=d;a.pageY=h.pageY=j;a.screenX=h.screenX=c.screenX;a.screenY=h.screenY=c.screenY;a.clientX=h.clientX=c.clientX;a.clientY=h.clientY=c.clientY;c=a.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;if(c=b(c).offset())j-=c.top,
a.offsetX=h.offsetX=d-c.left,a.offsetY=h.offsetY=j}}function S(b){return 3>b.length?b[1]:X(b).slice(1)}function da(a,l){var h=null,c=null;l&&(h=l[0],c=S(l));var d=h;if(d&&null==d.offsetX&&null==d.offsetY&&d.pageX&&d.pageY){var j=d.target;if(j.ownerSVGElement)j=j.farthestViewportElement;else if(j===window||j===document)j=document.body;if(j=b(j).offset())d.offsetX=d.pageX-j.left,d.offsetY=d.pageY-j.top}return new q(a.controller,h,c,a.evSelector,a.evSelectorType)}function ea(b){for(var a in b){var l=
b[a];i(b,a)&&(l.rootElement=null,l.view.__controller=null,ea(l))}}function $(b){var a=b.rootElement,l=b.__meta,h;for(h in b){var c=b[h];i(b,h)&&(c.rootElement=l&&l[h]&&l[h].rootElement?T(l[h].rootElement,a,c):a,c.view.__controller=c,$(c))}}function T(a,l,h){null==a&&c(Ia,[h.__name]);!w(a)&&"object"!==typeof a&&c(Ja,[h.__name]);a=l?Q(a,l):b(a);0===a.length&&c(Ka,[h.__name]);1<a.length&&c(xa,[h.__name]);return a.get(0)}function h(a){d(a);p(a);var l=a.__controllerContext.managed,h=e.core.controllerManager.controllers;
-1===b.inArray(a,h)&&!1!==l&&h.push(a);!1!==l&&b(a.rootElement).trigger("h5controllerbound",a);l=t(a,"initPromise");l.push(a.initPromise);e.async.when(l).done(function(){H(a,!1)}).fail(va)}function v(b){null===b.rootController&&g(b);$(b);H(b,!0)}function j(b,a){var l=W();l.resolve();b.__controllerContext.templatePromise=l.promise();b.__controllerContext.initDfd=W();b.initPromise=b.__controllerContext.initDfd.promise();b.__controllerContext.readyDfd=W();b.readyPromise=b.__controllerContext.readyDfd.promise();
b.isInit=!1;b.isReady=!1;b.__controllerContext.args=a;for(var h in b)i(b,h)&&j(b[h])}function m(a,l){var h=null,c=l;b.isPlainObject(c)?h=c.target:c={};h=h?Q(h,a.rootElement,!0):a.rootElement;return e.ui.indicator.call(a,h,c)}function L(a,l){var h=[],c=[],d=function(a){var j=W();c.push(a);for(var f in a)if(i(a,f)){var m=a[f];-1===b.inArray(m,c)&&d(m)}a[l]&&b.isFunction(a[l])&&(a=a[l](),e.async.isPromise(a)&&(a.always(function(){j.resolve()}),h.push(j.promise())))};d(a);return h}function z(a){function l(a){h.push(a);
a.view.__view&&a.view.clear();for(var c in a)if(a.hasOwnProperty(c)&&i(a,c)){var d=a[c];-1===b.inArray(d,h)&&l(d)}for(var j in a)a.hasOwnProperty(j)&&(a[j]=null)}var h=[];l(a)}function K(b,a){return a.view.__view.isAvailable(b)?a.view.__view:a.parentController?K(b,a.parentController):e.core.view}function Y(b){return!b.__controllerContext||b.__controllerContext.isDisposing}function Ua(b,a){function l(b,c){var j=b.__controllerContext[d[c]];j&&!Aa(j)&&!Ba(j)&&j.rejectWith(b,[a]);if(b.parentController)l(b.parentController,
c);else if(c<d.length-1)for(var j=0,f=h.length;j<f;j++)l(h[j],c+1)}var h=[],c=function(b){var a=!1,l;for(l in b)i(b,l)&&(a=!0,c(b[l]));a||h.push(b)};c(b);for(var d=["initDfd","readyDfd"],j=0,f=h.length;j<f;j++)l(h[j],0)}function La(b,a){for(var l=b.childNodes,h=0,c=l.length;h<c;h++){var d=l[h];if(1===d.nodeType){if(d=La(d,a))return d}else if(8===d.nodeType){var j=d.nodeValue;if(0===j.indexOf(Ma)){var f=j.indexOf("}");if(-1!==f&&(j=j.slice(0,f).match(/id="([A-Za-z][\w-:\.]*)"/))&&j[1]===a)return d}}}return null}
function Ca(b){var a=this;return function(){return b.apply(a,arguments)}}function Na(b){var a=this;return function(){var l=e.u.obj.argsToArray(arguments);l.unshift(this);return b.apply(a,l)}}function Oa(b){this.__controller=b;e.u.obj.getByPath("h5.core.view")&&(this.__view=e.core.view.createView())}function oa(b,a,l,h,c){this.__name=a;this.__templates=null;this.rootElement=b;this.__controllerContext={executeListeners:!0,isRoot:c,bindMap:{},unbindMap:{},controllerDef:l};this.__controllerContext.args=
h?h:null;this.isReady=this.isInit=!1;this.readyPromise=this.initPromise=this.preinitPromise=this.parentController=this.rootController=null;this.log=e.log.createLogger(a);this.view=new Oa(this)}function fb(){this.rootElement=document;this.controllers=[];b(document).bind(Da,function(b,a){null==a.target&&(a.target=document);a.indicator=m(this,a);b.stopPropagation()})}function R(a,h,d,j){var f=!j||!j.isInternal,m=h.__name;(!w(m)||0===b.trim(m).length)&&c(ka,null,{controllerDefObj:h});d&&!b.isPlainObject(d)&&
c(la,[m],{controllerDefObj:h});h.__controllerContext&&c(Va,null,{controllerDefObj:h});if(f||a)if(null==a)c(Ia,[m],{controllerDefObj:h});else if(w(a)||"object"===typeof a){var g=b(a);0===g.length&&c(Ka,[m],{controllerDefObj:h});1<g.length&&c(xa,[m],{controllerDefObj:h})}else c(Ja,[m],{controllerDefObj:h});s(h)&&c(Wa,[m],{controllerDefObj:h});J(h)&&c(Ea,[m],{controllerDefObj:h});var F=new oa(a?b(a).get(0):null,m,h,d,f),a=b.extend(!0,{},h),ba=h.__templates,X=W(),g=X.promise(),P=W(),i=P.promise();F.__controllerContext.preinitDfd=
P;F.preinitPromise=i;F.__controllerContext.initDfd=W();F.initPromise=F.__controllerContext.initDfd.promise().fail(va);F.__controllerContext.readyDfd=W();F.readyPromise=F.__controllerContext.readyDfd.promise();f||F.readyPromise.fail(va);if(ba&&0<ba.length){var L=function(b){e.u.obj.getByPath("h5.core.view")||c(ia);F.view.load(ba).done(function(){X.resolve()}).fail(function(a){var l=a.detail.error.status;b===e.settings.dynamicLoading.retryCount||0!==l&&12029!==l?setTimeout(function(){X.reject(a)},0):
setTimeout(function(){L(++b)},e.settings.dynamicLoading.retryInterval)})};L(0)}else X.resolve();g.done(function(){Y(F)||P.resolveWith(F)}).fail(function(b){P.rejectWith(F,[b]);F.rootController&&F.rootController.dispose(b)});for(var n in a)if(Xa[n])c(Ya,[m,n],{controllerDefObj:h});else if(("__ready"===n||"__construct"===n||"__init"===n)&&b.isFunction(a[n]))F[n]=k(a,n);else if(-1!==n.indexOf(" ")&&b.isFunction(a[n])){g=b.trim(n);i=g.lastIndexOf(" ");f=b.trim(g.substring(0,i));g=b.trim(g.substring(i+
1,g.length));C(g)&&(g="["+b.trim(y(g))+"]");I(f)&&"this"===D(f)&&c(Za,[m],{controllerDefObj:h});i=F.__controllerContext.bindMap;i[f]||(i[f]={});i[f][g]&&c($a,[m,f,g],{controllerDefObj:h});var ha=k(a,n,!0);i[f][g]=ha;F[n]=ha}else l(n,Ra)&&a[n]&&!b.isFunction(a[n])?(f=R(null,b.extend(!0,{},a[n]),d,b.extend({isInternal:!0},j)),F[n]=f):F[n]=l(n,Sa)&&a[n]&&!b.isFunction(a[n])?U(h[n]):b.isFunction(a[n])?k(a,n):a[n];if(d=F.__meta)for(n in d)f=F[n],void 0===f&&c(pa,[m,n],{controllerDefObj:h}),null===f&&c(Pa,
[m,n],{controllerDefObj:h}),oa.prototype.constructor!==f.constructor&&c(Qa,[m,n],{controllerDefObj:h});F.__construct&&F.__construct({args:F.__controllerContext.args});if(Y(F))return null;j&&"managed"in j&&(F.__controllerContext.managed=j.managed);F.__controllerContext.isRoot&&v(F);return F}function U(a){var h=a.__name;(!w(h)||0===b.trim(h).length)&&c(ya,null,{logicDefObj:a});a.__logicContext&&c(za,null,{logicDefObj:a});var d=b.extend(!0,{},a),j;for(j in d)d[j]=b.isFunction(d[j])?A(d[j],j,E(d.__name,
j)):d[j];d.deferred=W;d.log=e.log.createLogger(h);d.__logicContext={logicDef:a};d.own=Ca;d.ownWithOrg=Na;for(var f in d)d.hasOwnProperty(f)&&l(f,Sa)&&(d[f]=U(d[f]));return d}var ja="undefined",Ra="Controller",Sa="Logic",na="h5trackstart",Ga="h5trackmove",ua="h5trackend",Ha="rootElement",Da="triggerIndicator",Ma="{h5view ",wa=6E3,Ia=6001,Ka=6003,xa=6004,ka=6006,la=6007,Va=6008,Wa=6009,Ea=6010,Ya=6011,Za=6012,$a=6013,pa=6014,Pa=6015,Qa=6016,ya=6017,za=6018,ia=6029,Ja=6030,Ta=6033,va=function(){},W=
e.async.deferred,ta=e.u.str.startsWith,l=e.u.str.endsWith,F=e.u.str.format,X=e.u.obj.argsToArray,P={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},ba=[],ha=[];b.extend(q.prototype,P);b.extend(Oa.prototype,{get:function(b,a){return K(b,this.__controller).get(b,a)},update:function(b,a,l){b=Q(b,this.__controller.rootElement,!0);return K(a,this.__controller).update(b,a,l)},append:function(b,a,l){b=Q(b,this.__controller.rootElement,!0);return K(a,this.__controller).append(b,a,l)},
prepend:function(b,a,l){b=Q(b,this.__controller.rootElement,!0);return K(a,this.__controller).prepend(b,a,l)},load:function(b){return this.__view.load(b)},register:function(b,a){this.__view.register(b,a)},isValid:function(b){return this.__view.isValid(b)},isAvailable:function(b){return K(b,this.__controller).isAvailable(b)},clear:function(b){this.__view.clear(b)},bind:function(a,l){var h=a;if(w(a)&&0===a.indexOf("h5view#")){for(var c=La(this.__controller.rootElement,a.slice(7)),h=c.nodeValue,h=h.slice(h.indexOf("}")+
1),d=b("<div>").append(h),h=[],j=d[0].childNodes,f=0,m=j.length;f<m;f++)h.push(j[f]);d.empty();d=document.createDocumentFragment();f=0;for(m=h.length;f<m;f++)d.appendChild(h[f]);c.parentNode.insertBefore(d,c.nextSibling)}return this.__view.bind(h,l)}});b.extend(oa.prototype,{$find:function(a){return b(this.rootElement).find(a)},deferred:function(){return W()},trigger:function(a,l){var h=w(a)?b.Event(a):a;b(this.rootElement).trigger(h,l);return h},own:Ca,ownWithOrg:Na,bind:function(b,a){this.__controllerContext.isRoot||
c(6031);this.rootElement=T(b,null,this);this.view.__controller=this;j(this,a?a:null);v(this);return this},unbind:function(){this.__controllerContext.isRoot||c(6031);L(this,"__unbind");B(this);n(this);this.__controllerContext.unbindMap={};var a=this;e.core.controllerManager.controllers=b.grep(e.core.controllerManager.controllers,function(b){return b!==a});b(this.rootElement).trigger("h5controllerunbound",this);this.rootElement=null;this.view.__controller=null;ea(this)},dispose:function(b){if(!Y(this)){Ua(this,
b);this.__controllerContext.isDisposing=1;var a=this.deferred();this.unbind();var l=this,b=L(this,"__dispose");e.async.when(b).done(function(){z(l);a.resolve()});return a.promise()}},triggerIndicator:function(a){var l={indicator:null};a&&b.extend(l,a);b(this.rootElement).trigger(Da,[l]);return l.indicator},indicator:function(b){return m(this,b)},enableListeners:function(){G(this,!0)},disableListeners:function(){G(this,!1)},throwError:function(b,a){var l=X(arguments);l.unshift(null);this.throwCustomError.apply(null,
l)},throwCustomError:function(b,a,l){2>arguments.length&&c(6005);var h=null;a&&w(a)?h=Error(F.apply(null,X(arguments).slice(1))):(h=Error(),h.detail=a);h.customType=b;throw h;}});b.extend(fb.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(a,l){for(var h=l&&l.deep,c=l&&l.name?M(l.name):null,d=b(a)[0],j=this.controllers,f=[],m=0,g=j.length;m<g;m++){var F=j[m];c&&-1===b.inArray(F.__name,c)||(d===F.rootElement?f.push(F):h&&ca(d)===ca(F.rootElement)&&b.contains(d,
F.rootElement)&&f.push(F))}return f}});e.u.obj.expose("h5.core",{controllerManager:new fb});var Xa={},qa=new oa(null,"a"),fa;for(fa in qa)qa.hasOwnProperty(fa)&&"__name"!==fa&&"__templates"!==fa&&"__meta"!==fa&&(Xa[fa]=1);qa=null;qa=oa.prototype;for(fa in qa)qa.hasOwnProperty(fa)&&(Xa[fa]=1);qa=null;cb.controllerInternal=R;e.u.obj.expose("h5.core",{controller:function(b,a,l){2>arguments.length&&c(6032);return R(b,a,l)},logic:U,expose:function(b){var a=b.__name;a||c(6019,null,{target:b});var l=a.lastIndexOf(".");
if(-1===l)window[a]=b;else{var h=a.substr(0,l),a=a.substr(l+1,a.length),l={};l[a]=b;e.u.obj.expose(h,l)}}})})();(function(){function q(b){return(b=b&&w(b)?b.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:b[1],dataModel:b[2],dimension:b[3]?1:0}:{}}function x(a,h){return function P(a,l){if(!h[a])return!1;for(var c=0,d=h[a].length;c<d;c++)if(-1<b.inArray(h[a][c],l)||P(h[a][c],l.concat([a])))return!0;return!1}(a,[])}function k(b){return"number"===typeof b&&isNaN(b)}
function E(b,a){return null==b||k(b)||"number"===typeof b||!a&&(b instanceof Number||!(!(w(b)||b instanceof String)||!b.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function A(b,a){return null==b||"number"===typeof b&&parseInt(b)===b||!a&&(b instanceof Number&&parseInt(b)===parseFloat(b)||("string"===typeof b||b instanceof String)&&!!b.match(/^[+\-]{0,1}[0-9]+$/))}function I(a,h,d){function j(){f.push(p.call(this,arguments));if(d)throw null;}var f=[];try{if(!b.isPlainObject(a))throw j(Y),null;ja(a.name)||
j(Ua);var m=a.base,g=null;if(null!=m)if(!w(m)||0!==m.indexOf("@"))j(La);else{var v=m.substring(1);h.models[v]?g=h.models[v].schema:j(Ca,v)}var e=a.schema;!g&&null==e&&j(Na);if(!g&&!b.isPlainObject(e))throw j(Oa),null;}catch(n){c(T,null,f)}}function C(a,h,d,f){function m(){g.push(p.call(this,arguments));if(f)throw null;}"object"!==typeof a&&c(v);var g=[];try{if(h){var e=!1,n;for(n in a)a[n]&&!0===a[n].id&&(e&&m(oa),e=!0);e||m(R)}var i={},e=function(b){if(null!=b){t&&m(ga,o);K.hasOwnProperty("defaultValue")&&
m(Ya,o);if(null==b.on)m(ca,o);else for(var h=M(b.on),c=0,d=h.length;c<d;c++)if(!a.hasOwnProperty(h[c])){m(ca,o);break}"function"!==typeof b.calc&&m(ka,o);i[o]=M(b.on)}};n=function(b){t&&null==b&&(b="string");var a={};null!=b&&(w(b)?(t&&"string"!==b&&"integer"!==b&&m($a,o),a=q(b),a.elmType?(a.dataModel&&(h||m(na,o,a.dataModel),d.models[a.dataModel]||m(Ga,o,a.dataModel)),"enum"===a.elmType&&null==K.enumValue&&m(ua,o)):m(na,o,b)):m(la,o))};var L=function(a,h){if(null!=a)if(b.isPlainObject(a)){for(var l in a){var c=
a[l];if(null!=c)switch(l){case "notNull":!0!==c&&!1!==c?m(Da,o,l):t&&!c&&m(Ea,o,l,c);break;case "min":case "max":switch(h.elmType){case "integer":(w(c)||!A(c)||k(c))&&m(Ma,o,l);break;case "number":(w(c)||w(c)||!E(c)||Infinity===c||-Infinity===c||k(c))&&m(Ma,o,l);break;default:m(wa,o,l,h.elmType)}break;case "minLength":case "maxLength":switch(h.elmType){case "string":w(c)||!A(c)||k(c)||0>c?m(Ka,o,l):t&&"maxLength"===l&&0===c&&m(Ea,o,l,c);break;default:m(wa,o,l,h.elmType)}break;case "notEmpty":switch(h.elmType){case "string":!0!==
c&&!1!==c?m(Da,o,l):t&&!c&&m(Ea,o,l,c);break;default:m(wa,o,l,h.elmType)}break;case "pattern":switch(h.elmType){case "string":"regexp"!==b.type(c)&&m(Ia,o,l);break;default:m(wa,o,l,h.elmType)}}}a.notEmpty&&0===a.maxLength&&m(xa,o,"notEmpty","maxLength");null!=a.min&&null!=a.max&&a.min>a.max&&m(xa,o,"min","max");null!=a.minLength&&null!=a.maxLength&&a.minLength>a.maxLength&&m(xa,o,"minLength","maxLength")}else m(Ha,o)},z=function(a,l){null!=a&&("enum"!==l.elmType&&m(Aa,o),(!b.isArray(a)||0===a.length||
-1<b.inArray(null,a)||-1<b.inArray(void 0,a))&&m(Ba,o))},o;for(o in a){var K=null==a[o]?{}:a[o],t=h&&!!K.id;ja(o)||m(U,o);e(K.depend);n(K.type);var Y={},r=t&&null==r?"string":K.type;w(r)&&(Y=q(r));L(K.constraint,Y);z(K.enumValue,Y);t&&K.hasOwnProperty("defaultValue")&&m(Va,o)}for(var u in i)x(u,i)&&m(Za,u)}catch(s){c(j,null,g)}return!0}function D(b,a){var h=[];try{for(var d in b){var f=b[d];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||!("array"===f.type||q(f.type).dimension))&&f.hasOwnProperty("defaultValue")){var m=
f.defaultValue;a[d](m).length&&pushErrorReason(Wa,d,m)}}return!0}catch(g){c(j,null,h)}}function y(b,a,h){var c={},d;for(d in b){var j=c,f=d,m;m=h;var g=b[d]||{},v=[],e=null,n=0,e=g.type,i=g.constraint||{};a&&g.id&&(e=e||"string",i.notNull=!0,"string"===e&&(i.notEmpty=!0));e&&(n=q(e),e=n.elmType,n=n.dimension,v.push(s(e,{manager:m,enumValue:g.enumValue})));i&&v.push(u(i));m=J({checkFuncs:v,dimension:n});j[f]=m}return c}function u(b){return function(a){var h=[];b.notNull&&null==a&&h.push({notNull:b.notNull});
b.notEmpty&&!a&&h.push({notEmpty:b.notEmpty});if(null==a)return h;null!=b.min&&a<b.min&&h.push({min:b.min});null!=b.max&&b.max<a&&h.push({max:b.max});null!=b.minLength&&a.length<b.minLength&&h.push({minLength:b.minLength});null!=b.maxLength&&b.maxLength<a.length&&h.push({maxLength:b.maxLength});null!=b.pattern&&!a.match(b.pattern)&&h.push({pattern:b.pattern});return h}}function s(a,h){var c=[{type:a}];switch(a){case "number":return function(b,a){return E(b,a)?[]:c};case "integer":return function(b,
a){return A(b,a)?[]:c};case "string":return function(b,a){return null==b||w(b)||!a&&b instanceof String?[]:c};case "boolean":return function(b,a){return null==b||"boolean"===typeof b||!a&&b instanceof Boolean?[]:c};case "enum":return function(a){var l;a:if(l=h.enumValue,k(a)){for(var a=0,d=l.length;a<d;a++)if(k(l[a])){l=!0;break a}l=!1}else l=null===a||-1<b.inArray(a,l);return l?[]:c};case "any":return function(){return[]}}var d=a.match(/^@(.+?)$/)[1],j=h.manager;return function(b){var a=j.models[d];
return!a||"object"!==typeof b&&null!=b?c:null==b||a.has(b)?[]:c}}function J(a){var h=a.checkFuncs;if(!h||0===h.length)return function(){return[]};var c=a.dimension||0;return function(a,l){function d(a,f){if(!f){for(var m=0,g=h.length;m<g;m++){var v=h[m](a,l);if(v.length)return j=j.concat(v),!1}return!0}if(null==a)return!0;if(!b.isArray(a)&&!e.core.data.isObservableArray(a))return j.push({dimension:c}),!1;m=0;for(g=a.length;m<g;m++)if(!d(a[m],f-1))return!1;return!0}var j=[];d(a,c);return j}}function i(b,
a){b._values={};b._nullProps={};for(var h in a)if(a[h]&&t(a[h].type)){var c=ma();c.relatedItem=b;b._values[h]=c;b._nullProps[h]=!0}}function t(b){return!b?!1:-1!==b.indexOf("[]")}function p(){return{code:arguments[0]}}function d(a,h,d,j){function m(h){for(var h=M(v[h].depend.on),c=0,d=h.length;c<d;c++)if(-1===b.inArray(h[c],a._realProperty)&&-1!==b.inArray(h[c],g))return!1;return!0}function f(a,h){for(var c=0,l=h.length;c<l;c++){var d=e[h[c]];if(d)for(var j=0,m=d.length;j<m;j++){var g=d[j];-1===b.inArray(g,
a)&&a.push(g)}}}var g=[],v=a.schema||a._model.schema,e=a._dependencyMap,n={};for(j?g=a._dependProps.slice():f(g,M(d));0!==g.length;){for(var d=[],j=0,i=g.length;j<i;j++){var o=g[j];if(m(o)){var L=v[o].depend.calc.call(a,h);0!==a._validateItemValue(o,L,!0).length&&c(K,[a._model?a._model.name:pa,o,L]);n[o]={oldValue:a._values[o],newValue:L};v[o]&&t(v[o].type)?L?(a._values[o].copyFrom(L),a._nullProps[o]=!1):(a._values[o].copyFrom([]),a._nullProps[o]=!0):a._values[o]=L}else d.push(o)}f(d,g);g=d}return n}
function a(b,a,h,d){for(var j in h){j in b||c(z,[d?d.name:pa,j]);var f=h[j];if(!b[j]||!t(b[j].type)||h.hasOwnProperty(j))f=a(j,f,d&&d._idKey===j),0<f.length&&c(m,[d?d.name:pa,j],f)}}function f(a,h,j,f){var m=a.schema||a._model.schema,g=[],v;for(v in h)if(!(j&&-1!==b.inArray(v,j))){var n=a._values[v],i=h[v];if(m[v]&&m[v].depend)n!==i&&c(L,[a._model?a._model.name:pa,v]);else{var o=m[v]&&m[v].type;t(o)&&(null==i?(i=[],a._nullProps[v]=!0):a._nullProps[v]=!1);if(o&&o.match(/string|number|integer|boolean/)){var z=
i;if(b.isArray(z)){for(var z=z.slice(0),i=0,K=z.length;i<K;i++)z[i]=z[i]&&"object"===typeof z[i]?z[i]&&z[i].valueOf&&z[i].valueOf():z[i];i=z}else i=z&&"object"===typeof z&&z.valueOf?z.valueOf():z}if(null!=i&&o&&o.match(/number|integer/)&&"number"!==typeof i)if(b.isArray(i)||e.core.data.isObservableArray(i)){z=0;for(K=i.length;z<K;z++)null!=i[z]&&E(i[z])&&(i[z]=parseFloat(i[z]))}else null!=i&&(i=parseFloat(i));if(!t(o)||!n||!n.equals(i,n))n===i||k(n)&&k(i)||(o&&-1!==o.indexOf("[]")&&e.core.data.isObservableArray(n)&&
(n=n.toArray()),g.push({p:v,o:n,n:i}))}}if(g.length){h={};j=[];z=0;for(v=g.length;z<v;z++)n=g[z],m[n.p]&&t(m[n.p].type)?n.n&&a._values[n.p].copyFrom(n.n):a._values[n.p]=n.n,h[n.p]={oldValue:n.o,newValue:a.get(n.p)},j.push(n.p);m={type:!0===f?"create":"change",target:a,props:h};b.extend(h,d(a,m,j,f));return m}}function n(b){var a=b._manager,b=b.name;a._updateLogs||(a._updateLogs={});a._updateLogs[b]||(a._updateLogs[b]={});return a._updateLogs[b]}function B(b,a,h){if(b._manager)for(var c=n(b),d=0,j=
h.length;d<j;d++){var m=h[d],f=m._values[b._idKey];c[f]||(c[f]=[]);c[f].push({type:a,item:m})}}function G(b,a){if(b._manager){var h=n(b),c=a.target._values[b._idKey];h[c]||(h[c]=[]);h[c].push({type:Pa,ev:a})}}function g(a){var h={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c]?a[c].depend:null;if(d)for(var d=M(d.on),j=0,m=d.length;j<m;j++){var f=d[j];h[f]||(h[f]=[]);-1===b.inArray(c,h[f])&&h[f].push(c)}}return h}function H(a,h){I(a,h,!0);var c;c=(c=a.base)?h.models[c.slice(1)].schema:{};c=b.extend({},
c,a.schema);C(c,!0,h,!0);var d=y(c,!0,h);D(c,d,!0);return new ra(c,a,d,h)}function O(a,h){var c=[],d=[],j=[],m;for(m in a)a[m]&&a[m].depend?d.push(m):c.push(m),a[m]&&a[m].type&&-1!==a[m].type.indexOf("[]")&&j.push(m);m=g(a);var f={},v;for(v in a){var e=a[v];if(!e||!e.depend){var n=null,n=e&&void 0!==e.defaultValue?e.defaultValue:null;f[v]=n}}return{_realProps:c,_dependProps:d,_aryProps:j,_dependencyMap:m,_createInitialValueObj:function(a){if(!a)return b.extend({},f);var h=b.extend({},f),c;for(c in a)h[c]=
a[c];return h},_validateItemValue:function(b,a,c){return h[b](a,c)}}}function r(a,d,j,f){var g=!1,v=["sort","reverse","pop","shift"],n=null;j.addEventListener("changeBefore",function(j){f&&(a._isRemoved||!f._manager)&&c(h,[a._values[f._idKey],j.method]);var i=e.u.obj.argsToArray(j.args);if(-1===b.inArray(j.method,v)){var o=!0;switch(j.method){case "splice":o=!1;i.shift();i.shift();break;case "copyFrom":i=i[0];break;case "set":i.shift()}o&&(j=a._validateItemValue(d,i),0<j.length&&c(m,d,j))}f?(f._manager&&
(j=f._manager,i=f.name,j._oldValueLogs||(j._oldValueLogs={}),j._oldValueLogs[i]||(j._oldValueLogs[i]={}),j=j._oldValueLogs[i],i=a._values[f._idKey],j[i]||(j[i]={}),j[i][d]||(j[i][d]=a._values[d].toArray())),(g=f._manager?f._manager.isInUpdate():!1)||f._manager.beginUpdate()):n=a._values[d].toArray()});j.addEventListener("change",function(b){if(!(a._isInSet||null===b.method)){var h={type:"change",target:a,props:{}};h.props[d]={};f?(G(f,h),g?b.stopImmediatePropagation():(f._manager._isArrayPropChangeSilentlyRequested=
!0,f._manager.endUpdate(),f._manager._isArrayPropChangeSilentlyRequested=!1)):j.equals(n)||(h.props[d]={oldValue:n,newValue:a._values[d]},a.dispatchEvent(h))}})}function o(){}function Q(b){ja(b)||c($);this.models={};this.name=b;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function ra(b,a,h,c){this.items={};this.size=0;this.name=a.name;this._manager=c;for(var d in b)b[d]&&b[d].id&&(this._idKey=d);this._idType=(a=b[this._idKey].type)?"string"===a?da:ea:da;this.schema=b;this._itemConstructor=
V(b,h,this);c.models[this.name]=this}function V(h,c,d){function j(b){i(this,h,m,b);b=m._createInitialValueObj(b);a(h,m._validateItemValue,b,d);f(this,b,null,!0);for(var b=m._aryProps,c=0,g=b.length;c<g;c++)r(this,b[c],this.get(b[c]),d)}var m=O(h,c);d._schemaInfo=m;b.extend(j.prototype,o.prototype,m,Qa);b.extend(j.prototype,{_model:d,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return j}function sa(){}function Z(){this.length=0;this._src=[]}function ma(){return new Z}
function S(b){return b&&b.constructor===Z?!0:!1}var da="string",ea="number",$=15E3,T=15001,h=15005,v=15008,j=15009,m=15011,L=15012,z=15013,K=15016,Y=15900,Ua=15901,La=15902,Ca=15903,Na=15904,Oa=6,oa=15800,R=15801,U=15802,ga=15803,ca=15804,ka=15805,la=15806,na=15807,Ga=15808,ua=15809,Ha=15810,Da=15811,Ma=15812,wa=15813,Ia=15814,Ka=15815,xa=15816,Aa=15817,Ba=15818,Va=15819,Wa=15820,Ea=15821,Ya=15822,Za=15823,$a=15824,pa="n/a",Pa=2,Qa={get:function(a){if(0===arguments.length)return b.extend({},this._values);
var h=this._model;(h?h.schema:this.schema).hasOwnProperty(a)||c(15014,[h?h.name:pa,a]);return this._values[a]},set:function(b){var d=b;2===arguments.length&&(d={},d[arguments[0]]=arguments[1]);var j=this._model;j&&(this._isRemoved||!j._manager)&&c(h,[this._values[this._model._idKey],"set"],this);if(j)j._idKey in d&&d[j._idKey]!==this._values[j._idKey]&&c(15003,[j.name,this._idKey]),a(j.schema,j._schemaInfo._validateItemValue,d,j);else{var m=this.validate(d);if(m)throw m;}var m=null,g=j?j._manager.isInUpdate():
!1;j&&!g&&j._manager.beginUpdate();this._isInSet=!0;m=f(this,d);this._isInSet=!1;j?(m&&G(j,m),g||j._manager.endUpdate()):m&&this.dispatchEvent(m)},regardAsNull:function(b){return this._isArrayProp(b)?!0===this._nullProps[b]:null===this._values[b]},_isArrayProp:function(b){var a=this._model?this._model.schema:this.schema;return a[b]&&a[b].type&&-1<a[b].type.indexOf("[]")?!0:!1}};o.prototype.hasEventListener=function(b,a){if(!this.__listeners)return!1;var h=this.__listeners[b];if(!h||!this.__listeners.hasOwnProperty(b))return!1;
for(var c=0,d=h.length;c<d;c++)if(h[c]===a)return!0;return!1};o.prototype.addEventListener=function(a,h){(2!==arguments.length||!w(a)||!b.isFunction(h))&&c(15015);this.hasEventListener(a,h)||(this.__listeners||(this.__listeners={}),this.__listeners.hasOwnProperty(a)||(this.__listeners[a]=[]),this.__listeners[a].push(h))};o.prototype.removeEventListener=function(b,a){if(this.hasEventListener(b,a))for(var h=this.__listeners[b],c=0,d=h.length;c<d;c++)if(h[c]===a){h.splice(c,1);break}};o.prototype.dispatchEvent=
function(b){if(this.__listeners){var a=this.__listeners[b.type];if(a){b.target||(b.target=this);var h=!1;b.preventDefault=function(){h=true};var c=!1;b.stopImmediatePropagation=function(){c=true};for(var d=0,j=a.length;d<j&&!c;d++)a[d].call(b.target,b);return h}}};Q.prototype=new o;b.extend(Q.prototype,{createModel:function(a){(!a||"object"!==typeof a)&&c(T,null,[p(Y)]);if(!b.isArray(a))return this.models[a.name]?this.models[a.name]:H(a,this);var h=a.length;h||c(T,null,[p(Y)]);for(var d={},j=[],m=
0;m<h;m++){var f=a[m].name;if(this.models[f])e[m]=manager.models[a.name];else try{j.push(f);f=[];a[m].base&&f.push(a[m].base.substring(1));for(var g in a[m].schema){var v=a[m].schema[g];if(v){var i=v.type;i&&"@"===i.substring(0,1)&&(i=-1===i.indexOf("[]")?i.substring(1):i.substring(1,i.length-2),f.push(i))}}d[m]={depends:f}}catch(n){c(T)}}for(var e={size:0};e.size<h;){g={};v=!1;for(m=0;m<h;m++)if(!d[m].registed){for(var f=d[m].depends,i=0,o=f.length;i<o;i++)if(!this.models[f[i]]){g[f[i]]=!0;break}i===
o&&(e[m]=H(a[m],this),e.size++,v=!0,d[m].registed=!0)}if(!v){var m=!0,L;for(L in g)if(-1===b.inArray(L,j)){m=!1;break}m&&c(15004);c(T,null,[p(Ca,L)])}}a=[];for(m=0;m<h;m++)a.push(e[m]);return a},dropModel:function(b){if((b=w(b)?b:"object"===typeof b?b.name:null)&&this.models[b]){var a=this.models[b];a._manager=null;delete this.models[b];return a}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var b=
!this._isArrayPropChangeSilentlyRequested,a=this._updateLogs,h=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var c={},d;for(d in a)if(a.hasOwnProperty(d)){var j;j=this.models[d];var m=a[d],f=[],g=[],v=[],i=[],e=void 0;for(e in m){for(var n=m[e],o=!0,L=[],z=n.length-1;0<=z;z--){var K=n[z],q=K.type;if(q===Pa)L.push(K.ev);else{a:{for(o=0;o<z;o++){var p=n[o].type;if(1===p||3===p){z=n[o];break a}}z=null}if(1===q)z&&3===z.type?f.push({id:e,oldItem:z.item,newItem:K.item}):g.push(K.item);else if(z=
z&&3===z.type?z.item:z?null:K.item)i.push(z),z.dispatchEvent({type:"remove",model:j});o=!1;break}}if(o&&0<L.length){K={};for(z=L.length-1;0<=z;z--)for(var t in L[z].props)K[t]||(S(j.get(e).get(t))?(q=h&&h[j.name]&&h[j.name][e]&&h[j.name][e][t],j.get(e).get(t).equals(q)||(K[t]={oldValue:q})):K[t]={oldValue:L[z].props[t].oldValue});z=!1;for(t in K)q=K[t].oldValue,n=j.get(e).get(t),q===n||k(q)&&k(n)?delete K[t]:(z=j.get(e).get(t),b&&S(z)&&z.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),
K[t].newValue=z,z=!0);z&&(L={type:"change",target:L[0].target,props:K},v.push(L),L.target.dispatchEvent(L))}}(j=0===g.length&&0===f.length&&0===i.length&&0===v.length?!1:{created:g,recreated:f,removed:i,changed:v})&&(c[d]=j)}b=!1;for(d in c)b=!0,j=c[d],this.models[d].dispatchEvent({type:"itemsChange",created:j.created,recreated:j.recreated,removed:j.removed,changed:j.changed});c={type:"itemsChange",models:c};b&&this.dispatchEvent(c)}},_dataModelItemsChangeListener:function(b){var a=b.target.manager,
h={};h[b.target.name]=b;a.dispatchEvent({type:"itemsChange",models:h})}});b.extend(ra.prototype,o.prototype,{create:function(a){this._manager||c(15006,[this.name,"create"]);var h=this.validate(a,!0);if(h)throw h;(h=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var d=[],j=M(a),m=[],g=this._idKey,v=0,i=j.length;v<i;v++){var e=j[v],n=e[g],o=this._findById(n);o?(m.push(o),(n=f(o,e,[g]))&&G(this,n)):(e=new this._itemConstructor(e),this.items[n]=e,this.size++,d.push(e),m.push(e))}0<
d.length&&B(this,1,d);h||this._manager.endUpdate();return b.isArray(a)?m:m[0]},validate:function(h,d){try{var j=this._idKey,m=M(h);"object"!==typeof h&&!b.isArray(h)&&c(15007);if(d)for(var f=0,g=m.length;f<g;f++){var v=m[f],i=v[j];(""===i||null==i)&&c(15002,[this.name,j]);var e=this._schemaInfo._createInitialValueObj(v);a(this.schema,this._schemaInfo._validateItemValue,e,this)}else for(var f=0,n=m.length;f<n;f++)v=m[f],a(this.schema,this._schemaInfo._validateItemValue,v,this)}catch(o){return o}return null},
get:function(a){if(b.isArray(a)||e.core.data.isObservableArray(a)){for(var h=[],c=0,d=a.length;c<d;c++)h.push(this._findById(a[c]));return h}return this._findById(a)},remove:function(a){this._manager||c(15006,[this.name,"remove"]);var h=this._manager?this._manager.isInUpdate():!1;h||this._manager.beginUpdate();for(var d=this._idKey,j=M(a),m=[],f=[],g=0,v=j.length;g<v;g++)if(this.has(j[g])){var i=w(j[g])||A(j[g],!0)?j[g]:j[g]._values[d],e=this.items[i];delete this.items[i];this.size--;f.push(e);e._model&&
(e._isRemoved=!0);m.push(e)}else f.push(null);0<m.length&&B(this,3,m);h||this._manager.endUpdate();return b.isArray(a)?f:f[0]},removeAll:function(){var b=this.toArray();0<b.length&&this.remove(b);return b},has:function(a){return w(a)||A(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&b.isFunction(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return void 0===a?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",
created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,h;for(h in b)b.hasOwnProperty(h)&&a.push(b[h]);return a}});b.extend(sa.prototype,o.prototype,Qa,{validate:function(b){try{var h=b;2===arguments.length&&(h={},h[arguments[0]]=arguments[1]);a(this.schema,this._validateItemValue,h)}catch(c){return c}return null}});b.extend(Z.prototype,o.prototype);var ya={equals:function(a){var h=
this.length;if(!b.isArray(a)&&!S(a)||a.length!==h)return!1;for(var a=S(a)?a._src:a,c=0;c<h;c++){var d=this[c],j=a[c];if(!(d===j||k(d)&&k(j)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=S(a)?a._src:a;b.isArray(a)||c(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=e.u.obj.argsToArray(arguments),b=0,h=a.length;b<h;b++)S(a[b])&&
(a[b]=a[b].toArray());return this.concat.apply(this,a)}},za="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),ia;for(ia in ya)ya.hasOwnProperty(ia)&&-1===b.inArray(ia,za)&&za.push(ia);var Ja=["concat","slice","splice","filter","map"],Ta=["reverse","sort"],va="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");ia=0;for(var W=za.length;ia<W;ia++){var ta=za[ia];Z.prototype[ta]=function(a){function h(){var d=
c.apply(this._src,arguments);if(-1!==b.inArray(a,Ta))d=this;else if(-1!==b.inArray(a,Ja)){var j=ma();j.copyFrom(d);d=j}return d}var c=ya[a]?ya[a]:Array.prototype[a];return-1===b.inArray(a,va)?h:function(){if(!this.dispatchEvent({type:"changeBefore",method:a,args:arguments})){var b=h.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:a,args:arguments,returnValue:b});return b}}}(ta)}e.u.obj.expose("h5.core.data",{createManager:function(a,b){ja(a)||c($);var h=
new Q(a);if(null!=b){""===b&&(b="window");var d={};d[a]=h;e.u.obj.expose(b,d)}return h},createObservableArray:ma,createObservableItem:function(b){C(b,!1,null,!0);var h=y(b);D(b,h,!0);var c=new sa,h=O(b,h);i(c,b,h);c.schema=b;for(var d in h)c[d]=h[d];d=h._createInitialValueObj();a(b,h._validateItemValue,d);f(c,d,null,!0);b=0;for(h=c._aryProps.length;b<h;b++)r(c,c._aryProps[b],c.get(c._aryProps[b]));return c},isObservableArray:S,isObservableItem:function(a){return!(!a||!a.constructor||!a._validateItemValue||
b.isFunction(a.getModel))},createSequence:function(a,h,c){function d(){return v}function j(){var a=v;v+=e;return a}function m(){return v.toString()}function f(){var a=v;v+=e;return a.toString()}function g(){}var v=null!=a?a:1,e=null!=h?h:1,a=1===c?{current:m,next:f,returnType:1}:{current:d,next:j,returnType:2};a.setCurrent=function(a){v=a};b.extend(g.prototype,a);return new g},SEQ_STRING:1,SEQ_INT:2})})();(function(){function q(a,b){return!a||a.nodeType!==f?void 0:a.getAttribute(b)}function x(a){if(!a)return null;
for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function k(a,b,c,d){var f=[],b=M(b);if(!0===d)return w(f,a,b,c),f;for(var a=a.childNodes,d=0,g=a.length;d<g;d++)w(f,a[d],b,c);return f}function w(a,b,c,d){if(b.nodeType===f){for(var g=0,e=c.length;g<e;g++){var i=b.getAttribute(c[g]);if(void 0===d){if(null!==i){a.push(b);break}}else if(null!==i&&i==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;g=0;for(e=b.length;g<e;g++)w(a,b[g],c,d)}}}function A(a,c){for(var a=M(a),d=[],m=0,
g=a.length;m<g;m++){var e=a[m];if(e.nodeType===f&&!(!0===c&&(null!=q(e,B)||null!=q(e,G))))for(var i=k(e,n,void 0,!0),o=0,t=i.length;o<t;o++){for(var p=!0,r=i[o];null!=r&&r!==e;r=r.parentNode)if(null!=q(r,B)||null!=q(r,G)){p=!1;break}p&&d.push(i[o])}}return b(d)}function I(a,c,d){for(var m=[],g=0,e=a.length;g<e;g++){var i=a[g];if(i.nodeType===f){if(!0===d){if(null!=i.getAttribute(c)){m.push(i);continue}if(null!=q(i,B)||null!=q(i,G))continue}for(var n=k(i,c,void 0,!1),o=0,t=n.length;o<t;o++){var p=
b(n[o])[0],r=p.parentNode;(null==q(r,B)&&null==q(r,G)||r===i)&&m.push(p)}}}return b(m)}function C(a){return a&&a.addEventListener&&a.getModel&&!b.isArray(a)&&!e.core.data.isObservableArray(a)||e.core.data.isObservableItem(a)?!0:!1}function D(a,b){for(var c=0,d=a.length;c<d;c++){var g=a[c];g.nodeType===f&&g.setAttribute(H,b)}}function y(a,d,j){var m=S++,f=d[0];b(f).empty();if(j){!b.isArray(j)&&!e.core.data.isObservableArray(j)&&c(Z);D(d,m);a._addBindingEntry(j,f,m);e.core.data.isObservableArray(j)&&
!a._isWatching(j)&&(d=function(b){a._observableArray_changeListener(b)},a._listeners[a._getContextIndex(j)]=d,j.addEventListener("change",d));var d=q(f,g),d=x(a._getSrcCtxNode(d).childNodes),i=[];a._loopElementsMap[m]=i;for(var m=f.ownerDocument.createDocumentFragment(),n=j.get?function(a){return j.get(a)}:function(a){return j[a]},o=0,t=j.length;o<t;o++){for(var p=[],k=0,r=d.length;k<r;k++){var s=T(d[k]);p.push(s);m.appendChild(s)}i[o]=p;f.appendChild(m);u(a,p,n(o),!1,!0)}}}function u(a,d,j,f,g){d=
M(d);if(f)y(a,d,j);else{f=S++;j&&(("object"!==typeof j||b.isArray(j)||e.core.data.isObservableArray(j))&&c(Z),D(d,f),a._addBindingEntry(j,d,f));var i=C(j);i&&!a._isWatching(j)&&(f=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(j)]=f,j.addEventListener("change",f));A(d,g).each(function(){J(this,j,i)});s(a,d,j,!1,g);s(a,d,j,!0,g)}}function s(a,b,c,d,f){var g=d?"data-h5-loop-context":"data-h5-context";I(b,g,f).each(function(){var b=q(this,g),f=null;c&&(f=C(c)?c.get(b):
c[b]);u(a,this,f,d)})}function J(a,d,j){for(var f=q(a,n).split(Q),g=[],i=[],e=[],t=0,p=f.length;t<p;t++){var k=f[t];if(-1===k.indexOf(o))0<b.trim(k).length&&(g.push(null),i.push(null),e.push(b.trim(k)));else{var s=k.split(o),k=b.trim(s[0]),s=b.trim(s[1]),u=null,B=ra.exec(k);B&&(u=B[1],k=/(\S+)[\s\(]/.exec(k)[1]);0<k.length&&0<s.length&&(g.push(k),i.push(u),e.push(s))}}f=a.tagName.toLowerCase();t=b(a);p=0;for(k=g.length;p<k;p++){var u=g[p],B=i[p],G=e[p],s=null;d&&(s=j?d.get(G):d[G]);null==u&&("input"===
f?(u="attr",B="value"):u="text");switch(u){case "text":null==s?t.text(""):t.text(s);break;case "html":null==s?t.html(""):t.html(s);break;case "class":var u=q(a,r),G=(B=null==u)?"":" ",x=!1;s&&(x=!RegExp("\\s"+s+"\\s").test(" "+u+" "));t[0].className=(B?"":u)+(x?G+s:"");break;case "attr":B||c(V);"input"===f&&"value"===B?null==s?t.val(""):t.val(s):null==s?t.removeAttr(B):t.attr(B,s);break;case "style":B||c(V);null==s?t.css(B,""):t.css(B,s);break;default:c(sa)}}}function i(a,b,c){for(var d=0,f=c.length;d<
f;d++){var g=c[d];b.removeChild(g);a._removeBinding(g)}}function t(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(T(a[c]));return b}function p(a,b,c,d,f){for(var g=c.ownerDocument.createDocumentFragment(),i=[],e=0,n=f.length;e<n;e++){var o=t(c);i[e]=o;for(var k=0,p=o.length;k<p;k++)g.appendChild(o[k]);u(a,o,f[e])}Array.prototype[d].apply(b,i);return g}function d(a,b,c,d,f,g){var e=d.length;if(0!==e){for(var n=d[0],o=n,c=1===e?c.length:o+d[1];o<c;o++){var k=f[o];k&&i(a,b,k)}f.splice(n,
d[1]);if(!(2>=e)){o=f.length;o=0===o||0===n?b.firstChild:n>=o?null:f[n][0];c=g.ownerDocument.createDocumentFragment();n=[n,0];for(k=2;k<e;k++){for(var p=t(g),q=0,r=p.length;q<r;q++)c.appendChild(p[q]);u(a,p,d[k]);n.push(p)}b.insertBefore(c,o);Array.prototype.splice.apply(f,n)}}}function a(a,b){void 0!==a.nodeType?a.nodeType===f&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=x(a));this._bindRootId=da++;ea[this._bindRootId]=this;for(var c=[],d=0,e=this._targets.length;d<
e;d++){var i=this._targets[d];if(i.nodeType===f){i.setAttribute(O,this._bindRootId);for(var o=k(i,[B,G],void 0,!0),t=0,p=o.length;t<p;t++){var s=ma++;o[t].setAttribute(g,s)}o=k(i,n,void 0,!0);t=0;for(p=o.length;t<p;t++)s=o[t],/class\s*:/.test(q(s,n))&&""!=s.className&&s.setAttribute(r,s.className)}c.push(i.cloneNode(!0))}this._srces=c;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};u(this,this._targets,this._rootContext,!1,!0)}var f=1,n=
"data-h5-bind",B="data-h5-context",G="data-h5-loop-context",g="data-h5-dyn-ctx",H="data-h5-dyn-vid",O="data-h5-dyn-bind-root",r="data-h5-dyn-cn",o=":",Q=";",ra=/\(\s*(\S+)\s*\)/,V=7100,sa=7101,Z=7102,ma=0,S=0,da=0,ea={},$={},T;(function(){var a=document.createElement("div");a.h5Dummy="a";var c=a.cloneNode(!1),d=void 0!==c.h5Dummy;a.h5Dummy=void 0;d?(c.h5Dummy=void 0,T=function(a){var c=a.ownerDocument;return a.nodeType===f?b(b.trim(a.outerHTML),c)[0]:a.cloneNode(!0)}):T=function(a){return a.cloneNode(!0)}})();
b.extend(a.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===f){this._removeBinding(c);c.removeAttribute(O);for(var d=k(c,r,void 0,!0),i=0,e=d.length;i<e;i++)d[i].removeAttribute(r);c=k(c,g,void 0,!0);i=0;for(d=c.length;i<d;i++)c[i].removeAttribute(g)}}delete ea[this._bindRootId]},_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var c in b)if(b.hasOwnProperty(c)){var f=b[c],e=this._getSrcCtxNode(q(f,
g)),n=this._loopElementsMap[c];switch(a.method){case "set":d(this,f,a.target,[a.args[0],1,a.args[1]],n,e);break;case "shift":case "pop":var o=n[a.method]();o&&i(this,f,o);break;case "unshift":o=p(this,n,e,a.method,a.args);f.insertBefore(o,f.firstChild);break;case "push":o=p(this,n,e,a.method,a.args);f.appendChild(o);break;case "splice":d(this,f,a.target,a.args,n,e);break;case "reverse":for(var o=f,k=n;o.firstChild;)o.removeChild(o.firstChild);for(var r=0,f=k.length;r<f;r++)for(var e=k[r],s=e.length-
1;0<=s;s--)o.insertBefore(e[s],o.firstChild);n.reverse();break;case "sort":case "copyFrom":case null:for(var o=this._loopElementsMap,k=c,r=a.target,s=n,n=e,e=0,B=s.length;e<B;e++)i(this,f,s[e]);for(var s=f.ownerDocument.createDocumentFragment(),B=[],e=0,G=r.length;e<G;e++){var x=t(n);B[e]=x;for(var y=0,w=x.length;y<w;y++)s.appendChild(x[y]);u(this,x,r.get(e))}f.appendChild(s);o[k]=B}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var c=!1;a.target===this._rootContext&&
(c=!0);var d=this,f;for(f in b)if(b.hasOwnProperty(f)){var e=b[f];A(e,c).each(function(){J(this,a.target,!0)});I(e,B).each(function(){var b=q(this,B);if(!(b in a.props))return!0;d._removeBinding(this);var c=q(this,g),c=d._getSrcCtxNode(c),c=T(c);this.parentNode.replaceChild(c,this);u(d,c,a.props[b].newValue)});I(e,G).each(function(){var b=q(this,G);if(!(b in a.props)||a.target._isArrayProp(b))return!0;d._removeBinding(this);u(d,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=
0,c=this._srces.length;b<c;b++){var d=this._srces[b];if(q(d,g)===a)return d;d=k(d,g,a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(a){return b.inArray(a,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);$[c]=a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},
_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=$[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var d=this._srcToViewMap[c];d&&d[a]&&(delete d[a],this._hasBindingForSrc(d)||(d=!1,C(b)?(b.removeEventListener("change",this._listeners[c]),d=!0):e.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),d=!0),d&&delete this._listeners[c],delete this._srcToViewMap[c],this._usingContexts[c]=null))}$[a]&&
delete $[a]}},_removeBinding:function(a){if(a.nodeType===f){var b=q(a,H);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(H));for(var a=k(a,H),b=0,c=a.length;b<c;b++){var d=a[b];this._removeBindingEntry(q(d,H));d.removeAttribute(H)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});db={createBinding:function(b,c){return new a(b,c)}}})();(function(){function q(c){return e.u.obj.isJQueryObject(c)?c:b(c)}function x(){this.__cachedTemplates={}}
var k="[",E=7001,A=7002,I=7003,C=7010,D=7011,y=e.async.deferred,u={escapeHtml:function(b){return e.u.str.escapeHtml(b)}},s={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(b,c,e){this.cacheUrls.length>=this.MAX_CACHE&&this.deleteCache(this.cacheUrls[0]);this.cache[b]={};this.cache[b].templates=c;this.cache[b].path=e;this.cacheUrls.push(b)},deleteCache:function(b,c){c||delete this.cache[b];for(var e=0,d=this.cacheUrls.length;e<d;e++)if(this.cacheUrls[e]===b){this.cacheUrls.splice(e,
1);break}},getTemplateByUrls:function(i){function t(a){if(0!==a.length){var d={},f=[];a.each(function(){var a=b.trim(this.id),g=b.trim(this.innerHTML);a||c(A,null,{});try{var e=new EJS.Compiler(g,k);e.compile();d[a]=e.process;f.push(a)}catch(i){g=i.lineNumber,c(C,[g?" line:"+g:"",i.message],{id:a,error:i,lineNo:g})}});return{compiled:d,data:{ids:f}}}}function p(a,c,d){e.ajax(c).done(function(c,f,g){delete n.accessingUrls[a];c=b(g.responseText).filter(function(){return this.tagName&&-1===this.tagName.indexOf("/")&&
8!==this.nodeType});f=this.url;if(0<c.not('script[type="text/ejs"]').length)d.reject(ga(D,null,{url:a,path:f}));else{g=null;try{g=t(c.filter('script[type="text/ejs"]'))}catch(e){e.detail.url=a;e.detail.path=f;d.reject(e);return}var i,k;try{var p=g.compiled;k=g.data;k.path=f;k.absoluteUrl=a;i=p;n.append(a,p,f)}catch(q){d.reject(ga(E,null,{error:q,url:a,path:f}));return}d.resolve({ret:i,data:k})}}).fail(function(b){delete n.accessingUrls[a];d.reject(ga(I,[b.status,a],{url:a,path:c,error:b}))})}for(var d=
{},a=[],f=[],n=this,q=function(a){var b=n.cache[a].templates;n.deleteCache(a,!0);n.cacheUrls.push(a);return b},s=0;s<i.length;s++){var g=i[s],u=U(g);if(this.cache[u])b.extend(d,q(u)),f.push({absoluteUrl:u});else if(this.accessingUrls[u])a.push(this.accessingUrls[u]);else{var x=e.async.deferred();a.push(this.accessingUrls[u]=x.promise());p(u,g,x)}}var r=y();e.async.when(a).done(function(){for(var a=e.u.obj.argsToArray(arguments),c=0,g=a.length;c<g;c++)b.extend(d,a[c].ret),f.push(a[c].data);r.resolve(d,
f)}).fail(function(a){r.reject(a)});return r.promise()}};b.extend(x.prototype,{load:function(e){var k=y(),p=this,d=null;switch(b.type(e)){case "string":b.trim(e)||c(7004);d=[e];break;case "array":d=e;0===d.length&&c(7004);for(var e=0,a=d.length;e<a;e++)w(d[e])?b.trim(d[e])||c(7004):c(7004);break;default:c(7004)}s.getTemplateByUrls(d).done(function(a,c){b.extend(p.__cachedTemplates,a);k.resolve(c)}).fail(function(a){k.reject(a)});return k.promise()},getAvailableTemplates:function(){var b=[],c;for(c in this.__cachedTemplates)b.push(c);
return b},register:function(e,t){"string"!==b.type(t)?c(7E3,null,{id:e}):(!w(e)||!b.trim(e))&&c(A,[]);try{var p=new EJS.Compiler(t,k);p.compile();this.__cachedTemplates[e]=p.process}catch(d){p=d.lineNumber,c(C,[p?" line:"+p:"",d.message],{id:e})}},isValid:function(b){try{return(new EJS.Compiler(b,k)).compile(),!0}catch(c){return!1}},get:function(e,k){var p=this.__cachedTemplates;(!w(e)||!b.trim(e))&&c(A);(p=p[e])||c(7005,e);var d=k?b.extend(!0,{},k):{},a=d.hasOwnProperty("_h")?new EJS.Helpers(d):
new EJS.Helpers(d,{_h:u}),f=null;try{f=p.call(d,d,a)}catch(n){c(7006,n.toString(),n)}return f},update:function(b,c,e){return q(b).html(this.get(c,e))},append:function(b,c,e){return q(b).append(this.get(c,e))},prepend:function(b,c,e){return q(b).prepend(this.get(c,e))},isAvailable:function(b){return!!this.__cachedTemplates[b]},clear:function(e){if(void 0===e)this.__cachedTemplates={};else{var k=null;switch(b.type(e)){case "string":k=[e];break;case "array":e.length||c(A);k=e;break;default:c(A)}for(var e=
0,p=k.length;e<p;e++){var d=k[e];(!w(d)||!b.trim(d))&&c(A)}e=0;for(p=k.length;e<p;e++)delete this.__cachedTemplates[k[e]]}},bind:function(i,k){var p=null;null==i&&c(7007);b.isArray(i)?p=i:(p=b(i),0===p.length&&c(7007),p=p.toArray());(null==k||"object"!==typeof k||b.isArray(k)||e.core.data.isObservableArray(k))&&c(7009);return db.createBinding(p,k)}});var J=new x;J.createView=function(){return new x};b(function(){b('script[type="text/ejs"]').each(function(){var c=b.trim(this.id),e=b.trim(this.innerHTML);
0!==e.length&&c&&(e=new EJS.Compiler(e,k),e.compile(),J.__cachedTemplates[c]=e.process)})});e.u.obj.expose("h5.core",{view:J})})();(function(){function c(a){var d={},f;for(f in H){var g=b("<div></div>").addClass(a).addClass(f).appendTo("body"),e=b.camelCase(f);d[e]={};b.map(H[f],function(a){d[e][a]="width"===a||"height"===a?parseInt(g.css(a).replace(/\D/g,""),10):g.css(a)});g.remove()}return d}function x(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function k(a,b){for(var c=
[],d=a/2,f=0.8*a/2,g=360/b*Math.PI/180,e=1;e<=b;e++){var n=g*e,i=Math.cos(n),n=Math.sin(n);c.push({from:{x:d+f/2*i,y:d+f/2*n},to:{x:d+f*i,y:d+f*n}})}return c}function E(a){return function(){var b=document.body,c=document.documentElement,d=o?b:Q?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function A(a){return function(){var b=o?document.body:document.documentElement;
return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function I(a){var b=o?document.body:document.documentElement;return B.isiOS?window["inner"+a]:b["client"+a]}function C(a){var c=b(a)[0],d=document.body,f=b("html")[0],a={top:0,left:0};if(c===d&&Q)return{top:parseFloat(f.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(f.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||
0)};"undefined"!==typeof c.getBoundingClientRect&&(a=c.getBoundingClientRect());d=o?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:a.top+da()-c,left:a.left+ea()-d}}function D(){b.each(g(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function y(a){a=G(a)?a[0]:a;return a===window||a===document||a===document.body}
function u(c,f){this.style=b.extend(!0,{},c);if(!f.getElementById(a)){f.namespaces.add("v","urn:schemas-microsoft-com:vml");var g=f.createElement("style");f.getElementsByTagName("head")[0].appendChild(g);g.id=a;g.setAttribute("type","text/css");g.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}g=this.style.throbber.width;this.group=x("group",f,{width:g+"px",height:this.style.throbber.height+"px"});this.group.className=d;for(var g=k(g,this.style.throbber.lines),
e=this.style.throbberLine.color,n=this.style.throbberLine.width,i=0,o=g.length;i<o;i++){var p=g[i],q=p.from,s=p.to,p=x("line",f);p.strokeweight=n;p.strokecolor=e;p.fillcolor=e;p.from=q.x+","+q.y;p.to=s.x+","+s.y;q=x("stroke",f);q.opacity=1;p.appendChild(q);this.group.appendChild(p)}this._createPercentArea(f)}function s(a,d){var g=this,m=b(a);if(m.length){var n=ca(m[0]),k=b.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a"},d);this._displayed=!1;this._throbbers=
[];this._settings=k;this._styles=b.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(k.theme));this._$target=(this._isScreenLock=y(m))?b("body"):m;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){g._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){g._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime=
"number"===typeof k.fadeIn?k.fadeIn:-1;this._fadeOutTime="number"===typeof k.fadeOut?k.fadeOut:-1;this._$content=b();this._$overlay=b();this._$skin=b();for(var m=e.u.str.format(f,""===k.message?'style="display: none;"':"",k.message),s="https"===document.location.protocol?"return:false":"about:blank",r=0,u=this._$target.length;r<u;r++)this._$content=this._$content.add(b(n.createElement("div")).append(m).addClass(J).addClass(k.theme).addClass(i).hide()),this._$overlay=this._$overlay.add((k.block?b(n.createElement("div")):
b()).addClass(J).addClass(k.theme).addClass(t).hide()),this._$skin=this._$skin.add((Q||o?b(n.createElement("iframe")):b()).attr("src",s).addClass(J).addClass(p).hide());var B=this._isScreenLock&&V?"fixed":"absolute";b.each([this._$overlay,this._$content],function(){this.css("position",B)});n=k.promises;k=function(){g.hide()};m=b.hasOwnProperty("curCSS")?"pipe":"then";b.isArray(n)?(n=b.map(n,function(a){return a&&b.isFunction(a.promise)?a:null}),0<n.length&&la(e.async.when(n),m,[k,k])):n&&b.isFunction(n.promise)&&
la(n,m,[k,k])}}var J="h5-indicator",i="content",t="overlay",p="skin",d="vml-root",a="h5-vmlstyle",f='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',n=500,B=e.env.ua,G=e.u.obj.isJQueryObject,g=e.u.obj.argsToArray,H={throbber:["width","height"],"throbber-line":["width","color"]},O=!!document.createElement("canvas").getContext,r=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';
a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),o="CSS1Compat"!==document.compatMode,Q=B.isIE&&6>=B.browserVersion,M=B.isChrome&&B.isDesktop,V=!(B.isAndroidDefaultBrowser||B.isiOS&&5>B.browserVersion||Q||o||B.isWindowsPhone),R=null,Z=null,U=null,S=null,da=null,ea=null,$=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(f){f=b.camelCase(f);if(f in
a.style)return!0;for(var f=f.charAt(0).toUpperCase()+f.slice(1),g=0;g<d;g++)if(c[g]+f in a.style)return!0;return!1}}(),Z=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:o?b["client"+a]:c["client"+a]}}("Height"),U=E("Height"),S=E("Width"),da=A("Top"),ea=A("Left"),R=$("animationName");u.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML=
"";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){for(var a=this.style.throbber.lines,b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,f=0,g=d.length;f<g;f++){var e=d[f];if("textbox"!==e.nodeName){var n=f+1;e.firstChild.opacity=n==c?"1":n==c+1||n==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var i=this;this._runId=setTimeout(function(){i._run.call(i)},Math.floor(b/a))},_createPercentArea:function(a){var c=x("textbox",a),a=b(a.createElement("table"));
a.append("<tr><td></td></tr>");var d=a.find("td");d.width(this.group.style.width);d.height(this.group.style.height);d.css("line-height",this.group.style.height);d.addClass("throbber-percent");c.appendChild(a[0]);this.group.appendChild(c)},setPercent:function(a){b(this.group).find(".throbber-percent").html(a)}};var T=function(a,c){this.style=b.extend(!0,{},a);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,f=this.baseDiv,
g=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.appendChild(d);g.style.width=this.style.throbber.width+"px";g.style.height=this.style.throbber.height+"px";g.style.lineHeight=this.style.throbber.height+"px";g.className="throbber-percent";f.appendChild(g);this.positions=k(d.width,this.style.throbber.lines)};T.prototype=
{show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){b(this.baseDiv).remove();this._runId&&(M?clearInterval(this._runId):clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.canvas,b=a.getContext("2d"),c=this.highlightPos,d=this.positions,f=this.style.throbberLine.color,g=this.style.throbberLine.width,e=this.style.throbber.lines,n=this.style.throbber.roundTime;a.width=a.width;for(var i=0,o=d.length;i<
o;i++){b.beginPath();b.strokeStyle=f;b.lineWidth=g;var k=i+1;b.globalAlpha=k==c?1:k==c+1||k==c-1?0.75:0.4;var p=d[i],k=p.from,p=p.to;b.moveTo(k.x,k.y);b.lineTo(p.x,p.y);b.stroke()}c==e?c=0:c++;this.highlightPos=c;if(M){var q=0;this._runId=setInterval(function(){q++;a.style.webkitTransform="rotate("+q+"deg)";360<=q&&(q-=360)},n/360)}else if(R)a.className="throbber-canvas";else{var s=this;this._runId=setTimeout(function(){s._run.call(s)},Math.floor(n/e))}},setPercent:function(a){this.percentDiv.innerHTML=
a}};s.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+J).length)return this;this._displayed=!0;for(var a=this,c=this._fadeInTime,d=function(){var c=b(window);a._isScreenLock&&(D(a._$overlay,a._$content),V||(c.bind("touchmove",a._scrollHandler),c.bind("scroll",a._scrollHandler)));c.bind("orientationchange",a._resizeHandler);c.bind("resize",a._resizeHandler)},f=0,g=this._$target.length;f<g;f++){var e=this._$target.eq(f),n=this._$content.eq(f),i=this._$skin.eq(f),
o=this._$overlay.eq(f);!this._isScreenLock&&"static"===e.css("position")&&(e.data("before-position",e.css("position")),e.data("before-zoom",e.css("zoom")),e.css({position:"relative",zoom:"1"}));var k=ca(e[0]);if(k=O?new T(this._styles,k):r?new u(this._styles,k):null)a._throbbers.push(k),a.percent(this._settings.percent),k.show(n.children(".indicator-throbber")[0]);e.append(i).append(o).append(n)}f=b().add(this._$skin).add(this._$content).add(this._$overlay);0>c?(f.show(),d()):f.fadeIn(c,d);this._reposition();
this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!this._isScreenLock||!V)for(var c=0,d=this._$target.length;c<d;c++){b=this._$target.eq(c);var f=this._$overlay.eq(c),g=this._$skin.eq(c);if(this._isScreenLock)a=S(),b=U();else{var e=b[0];a=e.scrollWidth;b=e.scrollHeight;if(Q)a=Math.max(a,e.clientWidth),b=Math.max(b,e.clientHeight);else if(B.isIE&&"function"===typeof getComputedStyle){var e=getComputedStyle(e,null),n=parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight);
a+=n-parseInt(n)-1;e=parseFloat(e.height)+parseFloat(e.paddingTop)+parseFloat(e.paddingBottom);b+=e-parseInt(e)-1}}f.width(a).height(b);(Q||o)&&g.width(a).height(b)}},_reposition:function(){for(var a=0,c=this._$target.length;a<c;a++){var d=this._$target.eq(a),f=this._$content.eq(a);if(this._isScreenLock){var g=Z();V?f.css("top",(g-f.outerHeight())/2+"px"):f.css("top",da()+g/2-f.outerHeight()/2+"px")}else f.css("top",d.scrollTop()+(d.innerHeight()-f.outerHeight())/2);var g=f.innerWidth()-f.width(),
e=0;f.children().each(function(){var a=b(this);if("none"===a.css("display"))return!0;e+=a.outerWidth(!0)});f.width(e+g);f.css("left",d.scrollLeft()+(d.innerWidth()-f.outerWidth())/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var a=this,c=this._fadeOutTime,d=b().add(this._$skin).add(this._$content).add(this._$overlay),f=function(){var c=b(window);d.remove();a._isScreenLock||a._$target.each(function(a,c){var d=b(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});
d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",a._scrollHandler);c.unbind("scroll",a._scrollHandler);c.unbind("orientationchange",a._resizeHandler);c.unbind("resize",a._resizeHandler);a._resizeEventTimerId&&clearTimeout(a._resizeEventTimerId);a._scrollEventTimerId&&clearTimeout(a._scrollEventTimerId)};if(!R||M)for(var g=0,e=this._throbbers.length;g<e;g++)this._throbbers[g].hide();0>c?(d.hide(),f()):d.fadeOut(c,f);return this},percent:function(a){if("number"!==typeof a||
!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!w(a))return this;if(!this._redrawable)return this._lastMessage=a,this;this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=
this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;V||Q||o?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};e.u.obj.expose("h5.ui",{indicator:function(a,b){return new s(a,
b)},isInView:function(a,c){var d,f,g,e,n=b(a);if(void 0===c)f=I("Height"),e=I("Width"),d=da(),g=ea();else{e=b(c);if(0===e.find(n).length)return;g=C(e);d=g.top+parseInt(e.css("border-top-width"));g=g.left+parseInt(e.css("border-left-width"));f=e.innerHeight();e=e.innerWidth()}f=d+f;e=g+e;var i=C(n),o=i.top,i=i.left,k=o+n.outerHeight(),n=i+n.outerWidth();return(d<=o&&o<f||d<k&&k<=f)&&(g<=i&&i<e||g<n&&n<=e)},scrollToTop:function(){function a(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,
setTimeout(a,n))}var c=3;window.scrollTo(0,1);1!==b(window).scrollTop()&&setTimeout(a,n)}})})();(function(){function q(){var c=b.mobile.activePage,c=c&&c[0]&&c[0].id;return w(c)&&0<c.length?c:null}function x(){var c=q();null!==c&&b(function(){I.addCSS(c);I.bindController(c)})}function k(b,a){for(var c in D)for(var e=D[c],i=b===c,k=0,g=e.length;k<g;k++){var p=e[k];if(i)p[(a?"enable":"disable")+"Listeners"]()}for(c in y){e=y[c];i=b===c;k=0;for(g=e.length;k<g;k++)if(p=e[k],i)p[(a?"enable":"disable")+
"Listeners"]()}}function E(b,a){b=b.replace(/(\.0+)+$/,"");a=a.replace(/(\.0+)+$/,"");if(b===a)return 0;for(var c=b.split("."),e=a.split("."),i=c.length,k=0;k<i;k++){if(null==e[k])return 1;var g=parseInt(c[k],10),p=parseInt(e[k],10);if(g!==p)return g<p?-1:1}return null!=e[i]?-1:0}var A,I=null,C={},D={},y={},u={},s={},J=!1,i=!1,t=!1;e.u.obj.ns("h5.ui.jqm");e.ui.jqm.dataPrefix="h5";var p={__name:"JQMController",__ready:function(){var c=this,a=q();b(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)});
var f=this.$find("#"+a);f.one("h5controllerready.emulatepageshow",function(){t&&f[0]===b.mobile.activePage[0]&&f.trigger("h5jqmpageshow",{prevPage:b("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(b){A||this._initPage(b.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(b){A&&this._initPage(b.event.target.id)},_initPage:function(b){this.loadScript(b);this.addCSS(b);this.bindController(b)},"{rootElement} pageremove":function(c){b(c.event.target).trigger("h5jqmpagehide",
{nextPage:b.mobile.activePage});i=!0;var c=c.event.target.id,a=D[c],f=y[c];if(a){for(var e=0,k=a.length;e<k;e++)a[e].dispose();D[c]=[]}if(f){e=0;for(k=f.length;e<k;e++)f[e].dispose();y[c]=[]}},"{rootElement} pagebeforeshow":function(b){b=b.event.target.id;this.addCSS(b);k(b,!0)},"{rootElement} pagehide":function(c){i||b(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});i=!1;c=c.event.target.id;k(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(c){var a=!1,f=b(c.event.target),
e=c.evArg?c.evArg.prevPage:b("");if(c=D[f[0].id])for(var i=0,k=c.length;i<k;i++)if(!c[i].isReady){f.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){b.mobile.activePage[0]===f[0]&&f.trigger("h5jqmpageshow",{prevPage:e})});a=!0;break}a||f.trigger("h5jqmpageshow",{prevPage:e})},"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var a=q();null===a||-1!==b.inArray(c,D[a])||(y[a]||(y[a]=[]),y[a].push(c))}},"{rootElement} h5controllerunbound":function(c){var a=
c.evArg,c=q();null!==c&&(a=b.inArray(a,y[c]),-1!==a&&y[c].splice(a,1))},loadScript:function(c){var c=b("#"+c),a=b.trim(c.data(this.getDataAttribute("script")));if(0!==a.length)return a=b.map(a.split(","),function(a){return b.trim(a)}),c=!0==c.data(this.getDataAttribute("async")),e.u.loadScript(a,{async:c})},getDataAttribute:function(b){var a=e.ui.jqm.dataPrefix;null==a&&(a="h5");return 0!==a.length?a+"-"+b:b},bindController:function(b){var a=C[b],c=u[b];if(a&&0!==a.length){D[b]||(D[b]=[]);for(var n=
D[b],i=0,k=a.length;i<k;i++){for(var g=a[i],p=!1,q=0,s=n.length;q<s;q++){var o=n[q];if(o&&o.__name===g.__name){p=!0;break}}p||D[b].push(e.core.controller("#"+b,g,c[i]))}}},addCSS:function(c){if(c=s[c])for(var a=document.getElementsByTagName("head")[0],f=a.getElementsByTagName("link"),e=f.length,i=0,k=c.length;i<k;i++){for(var g=b.mobile.path.parseUrl(c[i]).filename,p=!1,q=0;q<e;q++)if(b.mobile.path.parseUrl(f[q].href).filename===g){p=!0;break}p||(g=document.createElement("link"),g.type="text/css",
g.rel="stylesheet",g.href=c[i],a.appendChild(g))}},removeCSS:function(c){var a=s[c];if(a&&(c=q(),null!==c)){var f=s[c];b("link").filter(function(){var c=b(this).attr("href");return-1!==b.inArray(c,a)&&-1===b.inArray(c,f)}).remove()}}};e.u.obj.expose("h5.ui.jqm.manager",{init:function(){J||(J=!0,A=0<=E(b.mobile.version,"1.4"),b(document).one("pageshow",function(){t=!0}),b(function(){I=cb.controllerInternal("body",p,null,{managed:!1});x()}))},define:function(d,a,f,e){w(d)||c(12E3,"id");null!=a&&!w(a)&&
!b.isArray(a)&&c(12E3,"cssSrc");null!=f&&((w(f)||b.isArray(f))&&c(12001),(!b.isPlainObject(f)||!("__name"in f))&&c(12E3,"controllerDefObject"),null!=e&&!b.isPlainObject(e)&&c(12E3,"initParam"));s[d]||(s[d]=[]);C[d]||(C[d]=[]);u[d]||(u[d]=[]);b.merge(s[d],b.map(b.makeArray(a),function(a){return b.inArray(a,s[d])!==-1?null:a}));f&&-1===b.inArray(f,C[d])&&(C[d].push(f),u[d].push(e));J&&null!==q()?x():this.init()}})})();(function(){function q(){w||(w=navigator.geolocation);return w}function x(b,c){this.oblateness=
b;this.semiMajorAxis=c}function k(){}var w=null,A=e.env.ua;x.prototype.getOblateness=function(){return this.oblateness};x.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var I=new x(298.257222,6378137),C=new x(299.152813,6377397.155),D=Math.PI/180;b.extend(k.prototype,{isSupported:A.isIE&&9<=A.browserVersion?!0:!!q(),getCurrentPosition:function(b){var c=e.async.deferred();q().getCurrentPosition(function(b){c.resolve(b)},function(b){c.reject(ga(2002,null,b))},b);return c.promise()},
watchPosition:function(b){function c(){}var k=e.async.deferred(),x=q().watchPosition(function(b){k.notify(b)},function(b){q().clearWatch(x);k.reject(ga(2002,null,b))},b);c.prototype.unwatch=function(){q().clearWatch(x);k.resolve()};return k.promise(new c)},getDistance:function(b,e,k,q,i){(!isFinite(b)||!isFinite(e)||!isFinite(k)||!isFinite(q))&&c(2E3);var t=i?i:I;t instanceof x||c(2001);var i=t.getSemiMajorAxis(),p=t.getOblateness(),b=b*D,e=e*D,k=k*D,t=q*D,q=(b+k)/2,p=Math.sqrt(2*p-1)/p,p=Math.pow(p,
2),d=Math.sqrt(1-p*Math.pow(Math.sin(q),2)),p=i*(1-p)/Math.pow(d,3),i=i/d,e=e-t;return Math.sqrt(Math.pow(p*(b-k),2)+Math.pow(i*Math.cos(q)*e,2))},GS_GRS80:I,GS_BESSEL:C});e.u.obj.expose("h5.api",{geo:new k})})();(function(){function q(a){if(a){var b=a.deferred;(Aa(b)||Ba(b)||!a.result)&&c(J)}}function x(a,d,e){if(b.isPlainObject(a))for(var k in a){var p=b.trim(k).replace(/ +/g," ").split(" "),g=[];""===p[0]?c(t):1===p.length?(g.push(p[0]),g.push("="),g.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(p[1])?
3===p.length&&/^like$/i.test(p[1])?(g.push(p[0]),g.push(p[1]),g.push("?"),g.push("ESCAPE"),g.push('"'+p[2]+'"')):(g.push(p[0]),g.push(p[1]),g.push("?")):c(i);d.push(g.join(" "));e.push(a[k])}}function k(){}function E(){this._multiple=!1}function A(a){this._db=a;this._df=p();this._tx=null;this._tasks=[];this._queue=[]}function I(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=b.isArray(d)?d.join(", "):"*";this._orderBy=this._where=null}function C(a,b,
c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c?M(c):[];this._df=p();this._multiple=!0}function D(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function y(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}function u(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function s(a){this._db=
a}var J=3E3,i=3003,t=3011,p=e.async.deferred,d=e.u.str.format;b.extend(E.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});b.extend(A.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof E||c(3009);var b=this._getRecentTask();
(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===e.length){var i=a(g);c._setResult.apply(c,[i]);d.notify(i,c)}else{for(var k=e.shift(),q=k._statements,r=k._parameters,s=p().resolve().promise(),i=[],t=0,u=q.length;t<u;t++)(function(a,b){s=R(s,function(){var d=p();c._tx.executeSql(a,b,function(a,b){i.push(k._onComplete(b));d.resolve()});return d.promise()})})(q[t],r[t]);R(s,function(){g.push(k._multiple?i:i[0]);b()})}}var c=this,d=this._df,e=this._queue,g=[];
try{q(this._getRecentTask());this._addTask(d);for(var i=0,k=e.length;i<k;i++)e[i]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){c._tx=a;b()},function(a){c._tx=null;for(var b=c._tasks,d=b.length-1;0<=d;d--)b[d].deferred.reject(ga(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){c._tx=null;for(var a=c._tasks,b=a.length-1;0<=b;b--){var d=a[b];d.deferred.resolve(d.result)}})}catch(r){d.reject(r)}this._df=p();return d.promise()},execute:function(){return this._execute(function(a){return a})},
promise:function(){return this._df.promise()}});I.prototype=new E;b.extend(I.prototype,{where:function(a){!b.isPlainObject(a)&&!w(a)&&c(3004,["Select","where"]);this._where=a;return this},orderBy:function(a){!b.isPlainObject(a)&&!w(a)&&c(3004,["Select","orderBy"]);this._orderBy=M(a);return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=d("SELECT {0} FROM {1}",this._columns,this._tableName);if(b.isPlainObject(c)){var e=[];x(c,e,this._parameters);a+=" WHERE "+e.join(" AND ")}else w(c)&&
(a+=" WHERE "+c);b.isArray(this._orderBy)&&(a+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});C.prototype=new E;b.extend(C.prototype,{_buildStatementAndParameters:function(){var a=this._values,c=this._statements,e=this._parameters;if(0===a.length)c.push(d("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else for(var i=0,k=a.length;i<k;i++){var g=a[i];if(null==g)c.push(d("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),e.push([]);else if(b.isPlainObject(g)){var p=[],q=[],r=[],o;for(o in g)p.push("?"),q.push(o),r.push(g[o]);c.push(d("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,q.join(", "),p.join(", ")));e.push(r)}}},_onComplete:function(a){return a.insertId}});D.prototype=new E;b.extend(D.prototype,{where:function(a){!b.isPlainObject(a)&&!w(a)&&c(3004,["Update","where"]);this._where=a;return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=this._values,e=[],i;for(i in a)e.push(i+
" = ?"),this._parameters.push(a[i]);a=d("UPDATE {0} SET {1}",this._tableName,e.join(", "));b.isPlainObject(c)?(i=[],x(c,i,this._parameters),a+=" WHERE "+i.join(" AND ")):w(c)&&(a+=" WHERE "+c);this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});y.prototype=new E;b.extend(y.prototype,{where:function(a){!b.isPlainObject(a)&&!w(a)&&c(3004,["Del","where"]);this._where=a;return this},_buildStatementAndParameters:function(){var a="",c=this._where,
a=d("DELETE FROM {0}",this._tableName);if(b.isPlainObject(c)){var e=[];x(c,e,this._parameters);a+=" WHERE "+e.join(" AND ")}else w(c)&&(a+=" WHERE "+c);this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});u.prototype=new E;b.extend(u.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});b.extend(s.prototype,{select:function(a,d,e){w(a)||c(3001,"select");!b.isArray(d)&&"*"!==d&&c(3005,"select");return new I(this.transaction(e),
a,d)},insert:function(a,d,e){w(a)||c(3001,"insert");null!=d&&!b.isArray(d)&&!b.isPlainObject(d)&&c(3006,"insert");return new C(this.transaction(e),a,d)},update:function(a,d,e){w(a)||c(3001,"update");b.isPlainObject(d)||c(3006,"update");return new D(this.transaction(e),a,d)},del:function(a,b){w(a)||c(3001,"del");return new y(this.transaction(b),a)},sql:function(a,d,e){w(a)||c(3007,"sql");null!=d&&!b.isArray(d)&&c(3008,"sql");return new u(this.transaction(e),a,d)},transaction:function(a){void 0!=a&&
!(a instanceof A)&&c(3002,"transaction");return a?a:new A(this._db)}});b.extend(k.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,d){if(this.isSupported)return a=openDatabase(a,b,c,d),new s(a)}});e.u.obj.expose("h5.api",{sqldb:new k})})();(function(){function c(b){this._storage=b}b.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(b){return this._storage.key(b)},getItem:function(b){b=this._storage.getItem(b);return null===b?null:e.u.obj.deserialize(b)},
setItem:function(b,c){this._storage.setItem(b,e.u.obj.serialize(c))},removeItem:function(b){this._storage.removeItem(b)},clear:function(){this._storage.clear()},each:function(b){for(var c=this._storage,e=0,q=c.length;e<q;e++){var w=c.key(e);b(e,w,this.getItem(w))}}});e.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(b){return!1}}():!1,
local:new c(window.localStorage),session:new c(window.sessionStorage)})})()})(jQuery);